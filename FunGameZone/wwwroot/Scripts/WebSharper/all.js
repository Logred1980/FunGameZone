var wsbundle=(()=>{var Wt=Object.defineProperty;var bs=Object.getOwnPropertyDescriptor;var _s=Object.getOwnPropertyNames;var xs=Object.prototype.hasOwnProperty;var Ts=(t,e)=>{for(var n in e)Wt(t,n,{get:e[n],enumerable:!0})},Es=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of _s(e))!xs.call(t,s)&&s!==n&&Wt(t,s,{get:()=>e[s],enumerable:!(r=bs(e,s))||r.enumerable});return t};var Ds=t=>Es(Wt({},"__esModule",{value:!0}),t);var Ku={};Ts(Ku,{AfterRenderQ2$227$42:()=>Rs,EventQ2$211$36:()=>Gs,Main:()=>Vs,RoomHostPage:()=>Ms,RoomPlayerPage:()=>Os,Runtime:()=>pr});function U(t,e){return Object.assign(Object.create(t.prototype),e)}var ks=Symbol("force");function oe(t){var e;function n(){return e||(e=t(s=>e=s)),e}return new Proxy(Function(),{get(s,o){return o==ks&&n(),n()[o]},set(s,o,l){return n()[o]=l,!0},construct(s,o,l){return Reflect.construct(n(),o,l)}})}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];t[r]===void 0&&delete t[r]}return t}function _e(t){return t===void 0?null:{$:1,$0:t}}function Ve(t,e,n){n?t[e]=n.$0:delete t[e]}function hr(t){return function(...e){return t(e)}}function dr(t){return Object.defineProperty(t,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),t}var Fs={ScriptBasePath:"./",ScriptSkipAssemblyDir:!1},pr=Fs;function j(t){return"Dispose"in t}var W=class{Equals(e){return this===e}GetHashCode(){return-1}};function Gs(t,e){return n=>r=>{let s=ee.GetInstance(t);return s.SetAnchorRoot(n),e({Vars:s,Anchors:s,Target:n,Event:r})}}function Rs(t,e){return n=>{let r=ee.GetInstance(t);r.SetAnchorRoot(n),e({Vars:r,Anchors:r,Target:n,Event:null})}}function Is(t,e,n){let r=new ue("New_5"),s=new ae("New_3"),o=D(e);try{for(;o.MoveNext();){let l=o.Current,i=l.Name;s.SAdd(i),r.set_Item(i,l)}}finally{typeof o=="object"&&j(o)&&o.Dispose()}return[he(e,zn(l=>{let i=l[0],c=l[1],a=l[2];if(s.Contains(i))return null;{let m=c===0?ee.GetOrAddHoleFor(t,i,()=>{let $=a==null?null:w(a.$0),p=Z.Create_1($==null?"":$.$0);return new Nn(i,p)}):c===1?ee.GetOrAddHoleFor(t,i,()=>{let $=a==null?null:w(a.$0),p=Z.Create_1($==null?0:$.$0);return new vn(i,p)}):c===2?ee.GetOrAddHoleFor(t,i,()=>{let $=a==null?null:w(a.$0),p=Z.Create_1($==null?!1:$.$0);return new An(i,p)}):c===3?ee.GetOrAddHoleFor(t,i,()=>{let $=a==null?null:w(a.$0),p=Z.Create_1($==null?-864e13:$.$0);return new Sn(i,p)}):c===4?ee.GetOrAddHoleFor(t,i,()=>new bn(i,Z.Create_1([]))):c===5?ee.GetOrAddHoleFor(t,i,()=>new Et(i,Z.Create_1(w(globalThis.document.querySelector("[ws-dom="+i+"]"))))):c===6?ee.GetOrAddHoleFor(t,i,()=>{let $=a==null?null:w(a.$0),p=Z.Create_1($==null?[]:$.$0);return new _n(i,p)}):I("Invalid value type");return r.set_Item(i,m),w(m)}},n)),{$:0,$0:r}]}function Vs(){let t=Z.Create_1(f.Empty),e=Z.Create_1(""),n=Z.Create_1(""),r=[0],s=[F.Empty],o=(x,N,d,u,h)=>{let g=Z.Create_1("");return f.Element("div",[C.Create("class","d-flex flex-wrap align-items-center mb-2")],[f.Element("button",ye(Y(()=>he([C.Create("class","btn btn-outline-light btn-sm me-2")],Y(()=>he(h?[]:[C.Create("disabled","")],Y(()=>[Ne("click",()=>()=>X(G(()=>{let A=rn(g.Get());if(A!=""){let k=qt();return S(po(N,A,k),q=>q.$==1?(alert(q.$0),E()):(globalThis.open("/room/"+N+"/player/"+k,"_blank"),E()))}else return alert("Enter your player name!"),E()}),null))])))))),[f.TextNode("Join the room")]),f.Element("label",[C.Create("class","me-2 ms-3")],[f.TextNode("Player Name:")]),f.Input([C.Create("class","form-control form-control-sm"),C.Create("style","width: 150px")],g),f.Element("div",[C.Create("class","text-light ms-3 me-2 fw-bold")],[f.TextNode("Room name:")]),f.Element("div",[C.Create("class","text-light ms-2 me-4")],[f.TextNode(x)]),f.Element("div",[C.Create("class","text-light ms-3 me-2 fw-bold")],[f.TextNode("Host name:")]),f.Element("div",[C.Create("class","text-light ms-2 me-4")],[f.TextNode(d)]),f.Element("div",[C.Create("class","text-light ms-3 me-2 fw-bold")],[f.TextNode("Create date:")]),f.Element("div",[C.Create("class","text-muted small")],[f.TextNode(u)])])};function l(){return G(()=>S($r(),N=>{let d=nt(u=>[u.RoomToken,u.IsOpen],N);return st(((Te(N)!==Te(s[0])||!b(d,s[0]))&&(t.Set(f.Concat(nt(u=>o(u.RoomName,u.RoomToken,u.HostName,vr(u.CreatedDT,"yyyy-MM-dd HH:mm:ss"),u.IsOpen),N))),s[0]=d),E()),G(()=>S(ot(2e3),()=>l())))}))}X(l(),null);function i(){return G(()=>S($r(),N=>{let d=Te(N);return st((d!==r[0]&&(t.Set(f.Concat(nt(u=>o(u.RoomName,u.RoomToken,u.HostName,vr(u.CreatedDT,"yyyy-MM-dd HH:mm:ss"),u.IsOpen),N))),r[0]=d),E()),G(()=>S(ot(2e3),()=>i())))}))}X(i(),null);let c=f.Element("div",[],[f.Element("div",[C.Create("class","border border-success rounded p-3 mb-4")],[f.Element("div",[C.Create("class","d-flex flex-wrap align-items-center")],[f.Element("button",[C.Create("class","btn btn-success me-3"),Ne("click",()=>()=>X(G(()=>{let N=rn(e.Get()),d=rn(n.Get());if(N!=""&&d!=""){let u=qt(),h=qt();return S(mo(N,h,d,u),g=>g.$==1?(alert(g.$0),E()):(globalThis.open("/room/"+u+"/host/"+h,"_blank"),E()))}else return alert("You did not enter the Host or Room name!"),E()}),null))],[f.TextNode("Create Room")]),f.Element("label",[C.Create("class","me-2")],[f.TextNode("Host Name:")]),f.Input([C.Create("class","form-control form-control-sm me-4"),C.Create("style","width: 150px")],e),f.Element("label",[C.Create("class","me-2")],[f.TextNode("Room Name:")]),f.Input([C.Create("class","form-control form-control-sm"),C.Create("style","width: 150px")],n)])]),f.Element("div",[C.Create("class","border border-secondary rounded p-3")],[f.EmbedView(t.View)])]),a=new pn("New_1"),m=(a.h.push(new xt("body",c)),a),$=Is(m.k,m.h,[]),p=new cn($[1],Ao($[0]));return(m.i=p,p).Doc}function Ms(t,e){let n=Z.Create_1(F.Empty),r=Z.Create_1(null),s=[0];function o(){return G(()=>S(St(t),a=>{let m=Te(a);return st((m!==s[0]&&(n.Set(a),s[0]=m),E()),G(()=>S(ot(1e3),()=>o())))}))}let l=null;X(G(()=>S(St(t),c=>(n.Set(c),s[0]=Te(c),E()))),null),X(o(),null);let i=null;return X(G(()=>S(dn(t),c=>(r.Set(c),E()))),null),f.EmbedView(M(c=>{if(c==null)return f.Element("div",[],[f.TextNode("Room does not exist!")]);{let a=c.$0;return Fr(a.HostName,e,a.RoomName,t,!0,n.View,me([f.Element("button",[C.Create("class","btn btn-danger btn-sm mt-2 me-2"),Ne("click",()=>()=>X(G(()=>S(go(t),$=>$.$==1?(alert($.$0),E()):(globalThis.close(),E()))),null))],[f.TextNode("Del Room")]),f.Element("button",[C.Create("class","btn btn-primary btn-sm mt-2 me-2"),Ne("click",()=>()=>X(G(()=>S($o(t,!a.IsOpen),$=>$.$==1?(alert($.$0),E()):S(dn(t),p=>(r.Set(p),E())))),null))],[f.TextNode(a.IsOpen?"Close Room":"Open Room")])]),w(()=>f.Empty))}},r.View))}function Os(t,e){let n=Z.Create_1(F.Empty),r=Z.Create_1(null),s=[0];function o(){return G(()=>S(St(t),a=>{let m=Te(a);return st((m!==s[0]&&(n.Set(a),s[0]=m),E()),G(()=>S(ot(1e3),()=>o())))}))}let l=null;X(G(()=>S(St(t),c=>(n.Set(c),s[0]=Te(c),E()))),null),X(o(),null);let i=null;return X(G(()=>S(dn(t),c=>(r.Set(c),E()))),null),f.EmbedView(M(c=>{if(c==null)return f.Element("div",[],[f.TextNode("Room does not exist!")]);{let a=c.$0,m=fn(v=>v.Token==e,n.Get()),$=m==null?null:w(m.$0.Name),p=$==null?"Unknown":$.$0;return Fr(a.HostName,e,a.RoomName,t,!1,n.View,me([f.Element("p",[],[f.TextNode("Your name: "+p)]),f.Element("button",[C.Create("class","btn btn-danger btn-sm mt-2"),Ne("click",()=>()=>X(G(()=>S(Or(t,e),T=>T.$==1?(alert(T.$0),E()):(globalThis.close(),E()))),null))],[f.TextNode("Exit")])]),null)}},r.View))}function Fr(t,e,n,r,s,o,l,i){let c=Z.Create_1(null),a=Z.Create_1(null),m=null;X(G(()=>S(wo(r,e),x=>(a.Set(x),E()))),null);let $=me([["Game21",x=>N=>d=>u=>Dl(x,N,d,u)]]),p=()=>G(()=>S(wr(r),N=>(c.Set(N),E())));X(p(),null);function v(){return G(()=>S(wr(r),N=>st((b(N,c.Get())||c.Set(N),E()),G(()=>S(ot(1e3),()=>v())))))}X(v(),null);let T=M(x=>{let N=fn(u=>u.Token==e,x),d=N==null?gr(u=>u.Token!=e,x):F.Cons(N.$0,gr(u=>u.Token!=e,x));return f.Element("div",[C.Create("class","bg-secondary text-white rounded p-3 ms-3"),C.Create("style","width: 20%")],ye(Y(()=>he([f.Element("h5",[C.Create("class","mb-3")],[f.TextNode("Players")])],Y(()=>nt(u=>f.Element("div",[C.Create("class","d-flex justify-content-between align-items-center mb-2")],ye(Y(()=>he([f.Element("span",[],[f.TextNode(u.Name)])],Y(()=>{let h;return i!=null&&i.$==1&&s&&u.Token!=e&&(h=i.$0,!0)?[f.Element("button",[C.Create("class","btn btn-danger btn-sm mt-2"),C.Create("style","margin-left: 5px"),Ne("click",()=>()=>X(G(()=>S(Or(r,u.Token),y=>(y.$==1&&alert(y.$0),E()))),null))],[f.TextNode("X")])]:[f.Empty]}))))),d))))))},o);return f.Element("div",[C.Create("class","d-flex flex-wrap justify-content-between mt-3")],[f.Element("div",[C.Create("class","bg-secondary text-white rounded p-3 me-3"),C.Create("style","width: 20%")],ye(Y(()=>he([f.Element("h5",[],[f.TextNode(s?"Host datas":"Players datas")])],Y(()=>he([f.Element("p",[],[f.TextNode("Room name: "+n)])],Y(()=>he([f.Element("p",[],[f.TextNode("Host name: "+t)])],Y(()=>l))))))))),f.Element("div",[C.Create("class","col-md-6")],[f.Element("div",[C.Create("class","bg-secondary text-white rounded p-3 mb-3 w-100")],[f.Element("h5",[],[f.TextNode("Game Zone")])]),f.EmbedView(M(x=>{if(x!=null&&x.$==1){let N=x.$0,d=null;return f.Async(G(()=>S(yo(r),u=>{let h;if(u==null)h=f.TextNode("The Game state does not exist!");else{let g=fn(y=>y[0]==N,$);if(g==null)h=f.TextNode("This game is wrong...");else{let y=g.$0[1](r)(e)(u.$0),A=a.Get();h=y(A==null?null:w(A.$0))}}return J(h)})))}else return f.Element("div",[C.Create("class","border border-info rounded p-3 w-100")],[f.Element("ul",[C.Create("class","mb-0 list-unstyled")],ye(Y(()=>At(N=>{let d=N[0];return[f.Element("li",[C.Create("class","d-flex justify-content-between align-items-center mb-2 w-100")],ye(Y(()=>he([f.Element("div",[],[f.TextNode(d)])],Y(()=>s?[f.Element("button",[C.Create("class","btn btn-primary btn-sm"),Ne("click",()=>()=>X(G(()=>S(Co(r,w(d)),()=>S(p(),()=>S(No(r),()=>J(null))))),null))],[f.TextNode("Start")])]:[])))))]},$))))])},c.View))]),f.EmbedView(T)])}var ee=oe(t=>class extends W{static{ee=t(this)}static init;id;vars;static initialized;static instances;static GetInstance(n){return ee.instances.Item(n)}static GetOrAddHoleFor(n,r,s){let o,l=ee.GetHolesFor(n),i=(o=null,[l.TryGetValue(r,{get:()=>o,set:c=>{o=c}}),o]);if(i[0])return i[1];{let c=s();return l.set_Item(r,c),c}}static GetHolesFor(n){let r,s=(r=null,[ee.initialized.TryGetValue(n,{get:()=>r,set:o=>{r=o}}),r]);if(s[0])return s[1];{let o=new ue("New_5");return ee.initialized.set_Item(n,o),o}}static{ee.initialized=new ue("New_5"),ee.instances=new ue("New_5")}}),cn=class extends W{doc;allVars;anchorRoot;SetAnchorRoot(e){this.anchorRoot=e}get Doc(){return this.doc}constructor(e,n){super(),this.doc=n,this.allVars=e.$==0?e.$0:I("Should not happen"),this.anchorRoot=null}};function _(t,e){return Gr(t,e),t[e]}function V(t){return t.dims===2?t.length*t.length:t.length}function Gr(t,e){(e<0||e>=t.length)&&I("Index was outside the bounds of the array.")}function Wn(t,e,n){Gr(t,e),t[e]=n}function Ps(t){let e={},n=D(t);try{for(;n.MoveNext();){let r=n.Current;e[r[0]]=r[1]}}finally{typeof n=="object"&&j(n)&&n.Dispose()}return e}function b(t,e){if(t===e)return!0;{let s=typeof t;if(s=="object"){if(t==null||e===null||e===void 0||!b(typeof e,"object"))return!1;if("Equals"in t)return t.Equals(e);if("Equals"in e)return!1;if(t instanceof Array&&e instanceof Array)return mr(t,e);if(t instanceof Date&&e instanceof Date)return Ls(t,e);{let o=[!0],l;for(var n in t)if((i=>(o[0]=!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&b(t[i],e[i]),!o[0]))(n))break;if(o[0]){let i;for(var r in e)if((c=>(o[0]=!e.hasOwnProperty(c)||t.hasOwnProperty(c),!o[0]))(r))break}return o[0]}}else return s=="function"&&("$Func"in t?t.$Func===e.$Func&&t.$Target===e.$Target:"$Invokes"in t&&"$Invokes"in e&&mr(t.$Invokes,e.$Invokes))}}function mr(t,e){let n,r;if(V(t)===V(e)){for(n=!0,r=0;n&&r<V(t);)b(_(t,r),_(e,r))||(n=!1),r=r+1;return n}else return!1}function Ls(t,e){return t.getTime()===e.getTime()}function He(t){let e=typeof t;return e=="function"?0:e=="boolean"?t?1:0:e=="number"?t:e=="string"?Rr(t):e=="object"?t==null?0:t instanceof Array?Hs(t):Us(t):0}function Rr(t){let e;if(t===null)return 0;e=5381;for(let n=0,r=t.length-1;n<=r;n++)e=Nt(e,t[n].charCodeAt());return e}function Hs(t){let e=-34948909;for(let n=0,r=V(t)-1;n<=r;n++)e=Nt(e,He(_(t,n)));return e}function Us(t){if("GetHashCode"in t)return t.GetHashCode();{let n=[0],r;for(var e in t)if((s=>(n[0]=Nt(Nt(n[0],Rr(s)),He(t[s])),!1))(e))break;return n[0]}}function Nt(t,e){return(t<<5)+t+e}function ke(t,e){if(t===e)return 0;{let s=typeof t;switch(s=="function"?1:s=="boolean"||s=="number"||s=="string"?2:s=="object"?3:0){case 0:return typeof e>"u"?0:-1;case 1:return I("Cannot compare function values.");case 2:return t<e?-1:1;case 3:if(t===null)return-1;if(e===null)return 1;if("CompareTo"in t)return t.CompareTo(e);if("CompareTo0"in t)return t.CompareTo0(e);if(t instanceof Array&&e instanceof Array)return Ws(t,e);if(t instanceof Date&&e instanceof Date)return qs(t,e);{let o=[0],l;for(var n in t)if((i=>t.hasOwnProperty(i)?e.hasOwnProperty(i)?(o[0]=ke(t[i],e[i]),o[0]!==0):(o[0]=1,!0):!1)(n))break;if(o[0]===0){let i;for(var r in e)if((c=>e.hasOwnProperty(c)?!t.hasOwnProperty(c)&&(o[0]=-1,!0):!1)(r))break}return o[0]}break}}}function Ws(t,e){let n,r;if(V(t)<V(e))return-1;if(V(t)>V(e))return 1;for(n=0,r=0;n===0&&r<V(t);)n=ke(_(t,r),_(e,r)),r=r+1;return n}function qs(t,e){return ke(t.getTime(),e.getTime())}var Z=oe(t=>class extends W{static{Z=t(this)}static Create_1(n){return new mn(!1,{s:Vt(n,[])},n)}}),f=class t extends W{docNode;updates;static get Empty(){return t.Mk(null,Oe())}static Concat(e){return pt(t.Empty,t.Append,dt(e))}static Mk(e,n){return new t(e,n)}static TextNode(e){return t.Mk(Rl(globalThis.document.createTextNode(e)),Oe())}static Input(e,n){return t.InputInternal("input",()=>he(e,[jr(n)]))}static Append(e,n){return t.Mk(Il(e.docNode,n.docNode),Pe(e.updates,n.updates))}static EmbedView(e){let n=si();return t.Mk(Vl(n),M(()=>{},Go(r=>(oi(n,r.docNode),r.updates),e)))}static Element(e,n,r){let s=C.Concat(n),o=t.Concat(r);return ft.New(globalThis.document.createElement(e),s,o)}static InputInternal(e,n){let r=globalThis.document.createElement(e);return ft.New(r,C.Concat(n(r)),t.Empty)}static Async(e){return t.EmbedView(Io(n=>n,Oe(e)))}static RunBefore(e,n){let r=globalThis.document.createTextNode("");e.parentNode.insertBefore(r,e),t.RunBetween(r,e,n)}static RunBetween(e,n,r){tr(n,r.docNode);let s=li(e,n,r.docNode);Hr(hs()||ds()?nu(ii(!1,s,r.docNode)):()=>{ui(!1,s,r.docNode)},r.updates)}static TextView(e){let n=mi();return t.Mk(Ol(n),M(r=>{gi(n,r)},e))}ReplaceInDom(e){let n=globalThis.document.createTextNode("");e.parentNode.replaceChild(n,e),t.RunBefore(n,this)}constructor(e,n){super(),this.docNode=e,this.updates=n}};function I(t){throw new Error(t)}function an(t,e){let n=1+e-t;return n<=0?[]:Zs(n,r=>r+t)}function Me(t){return[t.K,t.V]}function vt(t){let e=js(t);return e>2147483647?e-4294967296:e}function js(t){return(t<0?Math.ceil(t):Math.floor(t))>>>0}function Te(t){let e=t,n=0;for(;e.$==1;)e=Ir(e),n=n+1;return n}function nt(t,e){let n,r,s;if(e.$==0)return e;{let o=U(F,{$:1});for(n=o,r=e,s=!0;s;)if(n.$0=t(r.$0),r=r.$1,r.$==0)s=!1;else{let l=U(F,{$:1});n=(n.$1=l,l)}return n.$1=F.Empty,o}}function me(t){let e=F.Empty;for(let n=V(t)-1,r=0;n>=r;n--)e=F.Cons(_(t,n),e);return e}function ye(t){if(t instanceof F)return t;if(t instanceof Array)return me(t);{let e=D(t);try{let n,r=e.MoveNext();if(r){let s=U(F,{$:1});for(n=s;r;)if(n.$0=e.Current,e.MoveNext()){let o=U(F,{$:1});n=(n.$1=o,o)}else r=!1;return n.$1=F.Empty,s}else return F.Empty}finally{typeof e=="object"&&j(e)&&e.Dispose()}}}function gr(t,e){let n,r,s,o;if(e.$==0)return e;for(n=F.Empty,r=n,s=e,o=!0;o;){if(t(s.$0)){if(n.$==0)n=U(F,{$:1}),r=n;else{let i=U(F,{$:1});r=(r.$1=i,i)}let l=s.$0;r.$=1,r.$0=l}s=s.$1,s.$==0&&(o=!1)}return n.$!=0&&(r.$1=F.Empty),n}function Bs(t,e){return me(Kn(t,e))}function Ir(t){return t.$==1?t.$1:Vr()}function Js(t){return Ks((e,n)=>[e,n],t)}function Vr(){return I("The input list was empty.")}function Ks(t,e){let n,r,s,o;if(e.$==0)return e;{let l=U(F,{$:1});for(n=l,r=e,s=0,o=!0;o;)if(n.$0=t(s,r.$0),r=r.$1,r.$==0)o=!1;else{let i=U(F,{$:1});n=(n.$1=i,i),s=s+1}return n.$1=F.Empty,l}}function zs(t){return t.$==1?t.$0:Vr()}function Y(t){return{GetEnumerator:()=>D(t())}}function he(t,e){return{GetEnumerator:()=>{let n=D(t),r=[!0];return new ce(n,null,s=>{if(s.s.MoveNext())return s.c=s.s.Current,!0;{let o=s.s;return b(o,null)||o.Dispose(),s.s=null,r[0]&&(r[0]=!1,s.s=D(e),s.s.MoveNext()?(s.c=s.s.Current,!0):(s.s.Dispose(),s.s=null,!1))}},s=>{let o=s.s;b(o,null)||o.Dispose()})}}}function At(t,e){return Ys(Fe(t,e))}function fn(t,e){let n=D(e);try{let r=null;for(;r==null&&n.MoveNext();){let s=n.Current;t(s)&&(r=w(s))}return r}finally{typeof n=="object"&&j(n)&&n.Dispose()}}function Ys(t){return{GetEnumerator:()=>{let e=D(t);function n(r){for(;;){let s=r.s;if(b(s,null))if(e.MoveNext())r.s=D(e.Current),r=r;else return e.Dispose(),!1;else{if(s.MoveNext())return r.c=s.Current,!0;r.Dispose(),r.s=null,r=r}}}return new ce(null,null,n,r=>{let s=r.s;b(s,null)||s.Dispose(),b(e,null)||e.Dispose()})}}}function Fe(t,e){return{GetEnumerator:()=>{let n=D(e);return new ce(null,null,r=>n.MoveNext()&&(r.c=t(n.Current),!0),()=>{n.Dispose()})}}}function Zs(t,e){return Qs(t,eo(e))}function Xs(t){let e=D(t);try{return e.MoveNext()?e.Current:Ft()}finally{typeof e=="object"&&j(e)&&e.Dispose()}}function Qs(t,e){return t<0&&hu(),{GetEnumerator:()=>{let n=[D(e)];return new ce(0,null,r=>{if(r.s=r.s+1,r.s>t)return!1;{let s=n[0];return b(s,null)?Ft():s.MoveNext()?(r.c=s.Current,r.s===t&&(s.Dispose(),n[0]=null),!0):(s.Dispose(),n[0]=null,Ft())}},()=>{let r=n[0];b(r,null)||r.Dispose()})}}}function eo(t){return{GetEnumerator:()=>new ce(0,null,e=>(e.c=t(e.s),e.s=e.s+1,!0),void 0)}}function to(t,e){t<0&&I("negative index requested");let n=-1,r=D(e);try{for(;n<t;)r.MoveNext()||Ft(),n=n+1;return r.Current}finally{typeof r=="object"&&j(r)&&r.Dispose()}}function no(t,e,n){let r=e,s=D(n);try{for(;s.MoveNext();)r=t(r,s.Current);return r}finally{typeof s=="object"&&j(s)&&s.Dispose()}}function ro(t,e){let n=D(e);try{for(;n.MoveNext();)t(n.Current)}finally{typeof n=="object"&&j(n)&&n.Dispose()}}function Mr(t,e){return{GetEnumerator:()=>{let n=D(e),r=new ae("New_3");return new ce(null,null,s=>{let o,l;if(n.MoveNext()){for(o=n.Current,l=r.SAdd(t(o));!l&&n.MoveNext();)o=n.Current,l=r.SAdd(t(o));return l&&(s.c=o,!0)}else return!1},()=>{n.Dispose()})}}}function so(t,e){return!lo(n=>!t(n),e)}function oo(t){return Mr(e=>e,t)}function lo(t,e){let n=D(e);try{let r=!1;for(;!r&&n.MoveNext();)r=t(n.Current);return r}finally{typeof n=="object"&&j(n)&&n.Dispose()}}function io(t){let e=D(t);try{e.MoveNext()||uo();let n=e.Current;for(;e.MoveNext();){let r=e.Current;ke(r,n)===1&&(n=r)}return n}finally{typeof e=="object"&&j(e)&&e.Dispose()}}function uo(){return I("The input sequence was empty.")}function co(t,e,n){return!ao((r,s)=>!t(r,s),e,n)}function ao(t,e,n){let r=D(e);try{let s=D(n);try{let o=!1;for(;!o&&r.MoveNext()&&s.MoveNext();)o=t(r.Current,s.Current);return o}finally{typeof s=="object"&&j(s)&&s.Dispose()}}finally{typeof r=="object"&&j(r)&&r.Dispose()}}function fo(t,e,n){let r=D(e);try{let s=D(n);try{let o=0,l=!0;for(;l&&o===0;)r.MoveNext()?o=s.MoveNext()?t(r.Current,s.Current):1:s.MoveNext()?o=-1:l=!1;return o}finally{typeof s=="object"&&j(s)&&s.Dispose()}}finally{typeof r=="object"&&j(r)&&r.Dispose()}}function ho(t,e){return{GetEnumerator:()=>new ce(e,null,n=>{let r=t(n.s);return r==null?!1:(n.c=r.$0[0],n.s=r.$0[1],!0)},void 0)}}var hn=class extends W{};function qt(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=new gn;return Kn(8,()=>t[e.Next_1(t.length)]).join("")}function po(t,e,n){return S(new re().Async("Server/AddPlayerToRoom",[t,e,n]),r=>J(je()(r)))}function $r(){return S(new re().Async("Server/GetAllRooms",[]),t=>J(We(Pr)()(t)))}function mo(t,e,n,r){return S(new re().Async("Server/RegisterRoom",[t,e,n,r]),s=>J(je()(s)))}function St(t){return S(new re().Async("Server/GetPlayersInRoom",[t]),e=>J(We(B())()(e)))}function go(t){return S(new re().Async("Server/RemoveRoom",[t]),e=>J(je()(e)))}function $o(t,e){return S(new re().Async("Server/SetRoomOpenState",[t,e]),n=>J(je()(n)))}function dn(t){return S(new re().Async("Server/GetRoomByToken",[t]),e=>J(So()(e)))}function Or(t,e){return S(new re().Async("Server/RemovePlayerFromRoom",[t,e]),n=>J(je()(n)))}function wo(t,e){return S(new re().Async("Server/GetPlayerState",[t,e]),n=>J(bo()(n)))}function wr(t){return S(new re().Async("Server/GetCurrentGame",[t]),e=>J(_o()(e)))}function yo(t){return S(new re().Async("Server/GetGameState",[t]),e=>J(xo()(e)))}function Co(t,e){return new re().Async("Server/SetCurrentGame",[t,To()(e)])}function No(t){return S(new re().Async("Server/StartGame",[t]),e=>J(je()(e)))}function vo(t){let e=[],n;for(var r in t)e.push(t[r]);return e}var pn=class extends W{i;k;h;s;static New_1(){return new this("New_1")}constructor(e){if(e=="New_1"){let n;super(),this.i=null,this.k=(n=El(),String(n)),this.h=dr([]),Ve(this,"s",null)}}},jt,Bt,Jt,Kt,zt,Yt,Zt,Xt,Qt,en,tn,nn;function Ao(t){return yi("main"),t?Ci("main",w("mainform"),t):void 0}function je(){return jt||(jt=Re(void 0,"$",[[0,[["$0","ResultValue",B(),0]]],[1,[["$0","ErrorValue",B(),0]]]])())}function Pr(){return tn||(tn=It(void 0,[["RoomToken",B(),0],["HostToken",B(),0],["HostName",B(),0],["RoomName",B(),0],["Players",We(B()),0],["CreatedDT",vl(),0],["IsOpen",B(),0],["CurrentGame",B(),1]])())}function So(){return nn||(nn=Re(void 0,"$",[null,[1,[["$0","Value",Pr,0]]]])())}function bo(){return Yt||(Yt=Re(void 0,"$",[null,[1,[["$0","Value",Eo,0]]]])())}function _o(){return Qt||(Qt=Re(void 0,"$",[null,[1,[["$0","Value",B(),0]]]])())}function xo(){return Xt||(Xt=Re(void 0,"$",[null,[1,[["$0","Value",Do,0]]]])())}function To(){return en||(en=Al(void 0,"$",[null,[1,[["$0","Value",B(),0]]]])())}function Eo(){return zt||(zt=It(void 0,[["Token",B(),0],["Hand",We(Lr),0],["Wins",B(),0]])())}function Do(){return Zt||(Zt=It(void 0,[["Deck",We(Lr),0],["RoundOver",B(),0],["CurrentPlayerToken",B(),0],["PlayerOrder",We(B()),0],["PassedPlayers",Nr(B()),0],["Winner",Nr(B()),0]])())}function Lr(){return Kt||(Kt=It(void 0,[["Suit",ko,0],["Rank",Fo,0]])())}function ko(){return Bt||(Bt=Re(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]])())}function Fo(){return Jt||(Jt=Re(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]],[4,[]],[5,[]],[6,[]],[7,[]],[8,[]],[9,[]],[10,[]],[11,[]],[12,[]]])())}var F=class t{static Empty=U(t,{$:0});static Cons(e,n){return U(t,{$:1,$0:e,$1:n})}get_Item(e){return to(e,this)}GetEnumerator(){return new ce(this,null,e=>{let n=e.s;return n.$==0?!1:(e.c=n.$0,e.s=n.$1,!0)},void 0)}};function M(t,e){return Ge(()=>Be(t,e()))}function Oe(t){let e={s:Se(t)};return()=>e}function Ge(t){let e={c:null,o:t};return()=>{let n=e.c;if(n===null){n=e.o(),e.c=n;let r=n.s;return r!=null&&r.$==0?e.o=null:Ur(n,()=>{e.c=null}),n}else return n}}function Pe(t,e){return Ge(()=>Po(t(),e()))}function Go(t,e){return Ro(M(t,e))}function Ro(t){return Ge(()=>Lo(t()))}function Io(t,e){return Ge(()=>Ho(t,e()))}function Hr(t,e){function n(){Uo(e(),t,()=>{ve().Fork(n)})}ve().Fork(n)}function Vo(t,e,n,r){return Ge(()=>qo(t,e(),n(),r()))}function Mo(t){return Ge(()=>jo(Fe(e=>e(),t)))}function Oo(t,e,n){return Ge(()=>Rt(t,e(),n()))}function w(t){return{$:1,$0:t}}var ue=class extends W{equals;hash;count;data;Item(e){return this.get(e)}get(e){let n=this.data[this.hash(e)];return n==null?Di():$l(r=>{let s=Me(r);return this.equals.apply(null,[s[0],e])?w(s[1]):null},n)}set_Item(e,n){this.set(e,n)}set(e,n){let r=this.hash(e),s=this.data[r];if(s==null)this.count=this.count+1,this.data[r]=new Array({K:e,V:n});else{let o=Yn(l=>this.equals.apply(null,[Me(l)[0],e]),s);o==null?(this.count=this.count+1,s.push({K:e,V:n})):s[o.$0]={K:e,V:n}}}TryGetValue(e,n){let r=this.data[this.hash(e)];if(r==null)return!1;{let s=Yr(o=>{let l=Me(o);return this.equals.apply(null,[l[0],e])?w(l[1]):null},r);return s!=null&&s.$==1&&(n.set(s.$0),!0)}}GetEnumerator(){return tl(yl(vo(this.data)))}ContainsKey(e){let n=this.data[this.hash(e)];return n==null?!1:Xr(r=>this.equals.apply(null,[Me(r)[0],e]),n)}RemoveKey(e){return this.remove(e)}get Keys(){return new Dn(this)}get Values(){return new Mn(this)}remove(e){let n=this.hash(e),r=this.data[n];if(r==null)return!1;{let s=ht(o=>!this.equals.apply(null,[Me(o)[0],e]),r);return V(s)<r.length&&(this.count=this.count-1,this.data[n]=s,!0)}}static New_5(){return new this("New_5")}static New_6(e,n,r){return new this("New_6",e,n,r)}constructor(e,n,r,s){if(e=="New_5"&&(e="New_6",n=[],r=b,s=He),e=="New_6"){let o=n,l=r,i=s;super(),this.equals=l,this.hash=i,this.count=0,this.data=[];let c=D(o);try{for(;c.MoveNext();){let a=c.Current;this.set(a.K,a.V)}}finally{typeof c=="object"&&j(c)&&c.Dispose()}}}},mn=class extends hn{isConst;current;snap;view;id;get View(){return this.view}Get(){return this.current}Set(e){this.isConst?(n=>n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))(n=>{console.log(n)}):(at(this.snap),this.current=e,this.snap={s:Vt(e,[])})}SetFinal(e){this.isConst?(n=>n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))(n=>{console.log(n)}):(at(this.snap),this.isConst=!0,this.current=e,this.snap={s:Se(e)})}UpdateMaybe(e){let n=e(this.Get());n!=null&&n.$==1&&this.Set(n.$0)}constructor(e,n,r){super(),this.isConst=e,this.current=r,this.snap=n,this.view=()=>this.snap,this.id=Le()}};function Be(t,e){let n=e.s;if(n!=null&&n.$==0)return{s:Se(t(n.$0))};{let r={s:be([],[])};return ie(e,s=>{qn(r,e,t(s))},r),r}}function Ur(t,e){let n=t.s;n==null?e():(n!=null&&n.$==2||n!=null&&n.$==3)&&n.$1.push(e)}function ie(t,e,n){let r=t.s;r==null?at(n):r!=null&&r.$==2?(bt(r.$1,n),e(r.$0)):r!=null&&r.$==3?(r.$0.push(e),bt(r.$1,n)):e(r.$0)}function qn(t,e,n){let r=e.s;r!=null&&r.$==0?Je(t,n):Ke(t,n)}function Po(t,e){let n=t.s,r=e.s;if(n!=null&&n.$==0)return r!=null&&r.$==0?{s:Se(null)}:e;if(r!=null&&r.$==0)return t;{let s={s:be([],[])},o=()=>{let l=s.s;if(!(l!=null&&l.$==0||l!=null&&l.$==2)){let i=Ee(t),c=Ee(e);i!=null&&i.$==1&&c!=null&&c.$==1&&(i.$0[1]&&c.$0[1]?Je(s,null):Ke(s,null))}};return ie(t,o,s),ie(e,o,s),s}}function bt(t,e){if(t.push(e),t.length%20===0){let n=t.slice(0);gu(t);for(let r=0,s=V(n)-1;r<=s;r++){let o=_(n,r);typeof o=="object"?(l=>{l.s&&t.push(l)})(o):(l=>{t.push(l)})(o)}}}function Je(t,e){let n=t.s;if(n!=null&&n.$==3){t.s=Se(e);let r=n.$0;for(let s=0,o=V(r)-1;s<=o;s++)_(r,s)(e)}}function Ke(t,e){let n=t.s;if(n!=null&&n.$==3){t.s=Vt(e,n.$1);let r=n.$0;for(let s=0,o=V(r)-1;s<=o;s++)_(r,s)(e)}}function Ee(t){let e=t.s;return e!=null&&e.$==0?w([e.$0,!0]):e!=null&&e.$==2?w([e.$0,!1]):null}function Lo(t){let e={s:be([],[])};return ie(t,n=>{let r=n();ie(r,s=>{let o,l=r.s;if(l!=null&&l.$==0){let i=t.s;o=i!=null&&i.$==0}else o=!1;o?Je(e,s):Ke(e,s)},e)},e),e}function Ho(t,e){let n={s:be([],[])};return ie(e,r=>{$u(t(r),s=>{qn(n,e,s)})},n),n}function Uo(t,e,n){let r=t.s;r==null?n():r!=null&&r.$==2?(r.$1.push(n),e(r.$0)):r!=null&&r.$==3?(r.$0.push(e),r.$1.push(n)):e(r.$0)}function Wo(t){let e=t.s;if(e==null)return t;if(e!=null&&e.$==2){let n={s:Vt(e.$0,[])};return Bo(t,n),n}else if(e!=null&&e.$==3){let n={s:be([],[])};return ie(t,r=>{qn(n,t,r)},n),n}else return t}function qo(t,e,n,r){let s=e.s,o=n.s,l=r.s;if(s!=null&&s.$==0)return o!=null&&o.$==0?l!=null&&l.$==0?{s:Se(t(s.$0,o.$0,l.$0))}:Jo(t,s.$0,o.$0,r):l!=null&&l.$==0?Ko(t,s.$0,l.$0,n):zo(t,s.$0,n,r);if(o!=null&&o.$==0)return l!=null&&l.$==0?Yo(t,o.$0,l.$0,e):Zo(t,o.$0,e,r);if(l!=null&&l.$==0)return Xo(t,l.$0,e,n);{let i={s:be([],[])},c=()=>{let a=i.s;if(!(a!=null&&a.$==0||a!=null&&a.$==2)){let m=Ee(e),$=Ee(n),p=Ee(r);m!=null&&m.$==1&&$!=null&&$.$==1&&p!=null&&p.$==1&&(m.$0[1]&&$.$0[1]&&p.$0[1]?Je(i,t(m.$0[0],$.$0[0],p.$0[0])):Ke(i,t(m.$0[0],$.$0[0],p.$0[0])))}};return ie(e,c,i),ie(n,c,i),ie(r,c,i),i}}function jo(t){let e=Ae(t);if(e.length==0)return{s:Se([])};{let n={s:be([],[])},r=[V(e)-1],s=()=>{if(r[0]===0){let o=$e(l=>{let i=l.s;return i!=null&&i.$==0||i!=null&&i.$==2?i.$0:I("value not found by View.Sequence")},e);Qr(l=>{let i=l.s;return i!=null&&i.$==0},e)?Je(n,o):Ke(n,o)}else r[0]=r[0]-1};return te(o=>{ie(o,s,n)},e),n}}function Rt(t,e,n){let r=e.s,s=n.s;if(r!=null&&r.$==0)return s!=null&&s.$==0?{s:Se(t(r.$0,s.$0))}:Qo(t,r.$0,n);if(s!=null&&s.$==0)return el(t,s.$0,e);{let o={s:be([],[])},l=()=>{let i=o.s;if(!(i!=null&&i.$==0||i!=null&&i.$==2)){let c=Ee(e),a=Ee(n);c!=null&&c.$==1&&a!=null&&a.$==1&&(c.$0[1]&&a.$0[1]?Je(o,t(c.$0[0],a.$0[0])):Ke(o,t(c.$0[0],a.$0[0])))}};return ie(e,l,o),ie(n,l,o),o}}function Bo(t,e){let n=t.s;n==null?at(e):(n!=null&&n.$==2||n!=null&&n.$==3)&&bt(n.$1,e)}function Jo(t,e,n,r){return Be(s=>t(e,n,s),r)}function Ko(t,e,n,r){return Be(s=>t(e,s,n),r)}function zo(t,e,n,r){return Rt((s,o)=>t(e,s,o),n,r)}function Yo(t,e,n,r){return Be(s=>t(s,e,n),r)}function Zo(t,e,n,r){return Rt((s,o)=>t(s,e,o),n,r)}function Xo(t,e,n,r){return Rt((s,o)=>t(s,o,e),n,r)}function Qo(t,e,n){return Be(r=>t(e,r),n)}function el(t,e,n){return Be(r=>t(r,e),n)}var C=class t{static Create(e,n){return Tt(r=>{r.setAttribute(e,n)})}static Concat(e){let n=dt(e);return pt(ss(),t.Append,n)}static A3(e){return U(t,{$:3,$0:e})}static Append(e,n){return Pl(e,n)}static Handler(e,n){return t.HandlerImpl(e,n)}static A2(e,n){return U(t,{$:2,$0:e,$1:n})}static A1(e){return U(t,{$:1,$0:e})}static HandlerImpl(e,n){return Tt(r=>{r.addEventListener(e,s=>n(r)(s),!1)})}static A4(e){return U(t,{$:4,$0:e})}};function D(t){return t instanceof Array?Wr(t):b(typeof t,"string")?qr(t):t.GetEnumerator()}function Wr(t){return new ce(0,null,e=>{let n=e.s;return n<V(t)&&(e.c=_(t,n),e.s=n+1,!0)},void 0)}function qr(t){return new ce(0,null,e=>{let n=e.s;return n<t.length&&(e.c=t[n],e.s=n+1,!0)},void 0)}function tl(t){return t instanceof Array?Wr(t):b(typeof t,"string")?qr(t):"GetEnumerator0"in t?t.GetEnumerator0():t.GetEnumerator()}var ce=class extends W{s;c;n;d;e;MoveNext(){let e=this.n(this);return this.e=e?1:2,e}get Current(){return this.e===1?this.c:this.e===0?I("Enumeration has not started. Call MoveNext."):I("Enumeration already finished.")}Dispose(){this.d&&this.d(this)}constructor(e,n,r,s){super(),this.s=e,this.c=n,this.n=r,this.d=s,this.e=0}};function Ne(t,e){return Tt(n=>{n.addEventListener(t,r=>e(n)(r),!1)})}function jr(t){return ze(ki(),t)}function ze(t,e){let n=t(e);return C.Append(Tt(n[0]),nl(n[1],n[2]))}function nl(t,e){return os(e,t)}function yr(t){return C.A4(t)}function et(t,e){return os(e,n=>r=>n.setAttribute(t,r))}function rl(t){return ze(zi(),t)}function sl(t){return ze(Yi(),t)}function ol(t){return ze(Zi(),t)}function ll(t){return ze(Xi(),t)}function il(t){return ze(Qi(),t)}function G(t){return e=>{try{t()(e)}catch(n){e.k(er(n))}}}function S(t,e){return ul(n=>{t(Mt(r=>{if(r.$==0){let s=r.$0;ve().Fork(()=>{try{e(s)(n)}catch(o){n.k(er(o))}})}else ve().Fork(()=>{n.k(r)})},n.ct))})}function E(){return Ye.Zero}function X(t,e){let n=jn()[0],r=e==null?n:e.$0;r.c||t(Mt(s=>{s.$==1&&Br(s.$0)},r))}function st(t,e){return S(t,()=>e)}function ot(t){return e=>{let n,r;n=void 0,r=void 0,n=setTimeout(()=>{r.Dispose(),ve().Fork(()=>{e.k(Ot(null))})},t),r=Jr(e.ct,()=>{clearTimeout(n),ve().Fork(()=>{Kr(e)})})}}function ul(t){return e=>{e.ct.c?Kr(e):t(e)}}function jn(){return Ye.defCTS}function Br(t){console.log("WebSharper: Uncaught asynchronous exception",t)}function Jr(t,e){if(t===cl())return{Dispose(){return null}};{let n=t.r.push(e)-1;return{Dispose(){return Wn(t.r,n,()=>{})}}}}function Kr(t){t.k(is(new Dt("New",t.ct)))}function J(t){return e=>{e.k(Ot(t))}}function ve(){return Ye.scheduler}function cl(){return Ye.noneCT}function al(){return Ye.GetCT}function Bn(t){return e=>{let n=[!1],r=s=>{n[0]?I("A continuation provided by Async.FromContinuations was invoked multiple times"):(n[0]=!0,ve().Fork(s))};t(s=>{r(()=>{e.k(Ot(s))})},s=>{r(()=>{e.k(er(s))})},s=>{r(()=>{e.k(is(s))})})}}function fl(t,e){let n=jn()[0],r=e==null?n:e.$0;ve().Fork(()=>{r.c||t(Mt(s=>{s.$==1&&Br(s.$0)},r))})}function hl(t,e,n,r,s){let o=jn()[0],l=s==null?o:s.$0;l.c||t(Mt(i=>{i.$==1?n(i.$0):i.$==2?r(i.$0):e(i.$0)},l))}function rn(t){return t.replace(new RegExp("^\\s+"),"").replace(new RegExp("\\s+$"),"")}function Jn(t,e){return Zr(t,e).join("")}function sn(t,e,n){return t.substr(e,n)}function _t(t,e){return t.substring(0,e.length)==e}function Ue(t,e){return Ae(e).join(t)}function dl(t,e){return so(t,pl(e))}function ge(t,e,n){return ml(t,new RegExp("["+gl(e.join(""))+"]"),n)}function pl(t){return t??""}function ml(t,e,n){return n===1?ht(r=>r!=="",Cr(t,e)):Cr(t,e)}function gl(t){return t.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")}function Cr(t,e){return t.split(e)}function Kn(t,e){t<0&&I("Negative size given.");let n=new Array(t);for(let r=0,s=t-1;r<=s;r++)n[r]=e(r);return n}function zr(t){let e=[],n=t;for(;n.$!=0;)e.push(zs(n)),n=Ir(n);return e}function zn(t,e){let n=[];for(let r=0,s=e.length-1;r<=s;r++){let o=t(e[r]);o==null||n.push(o.$0)}return n}function $l(t,e){let n=Yr(t,e);return n==null?I("KeyNotFoundException"):n.$0}function wl(t,e){let n=Yn(t,e);return n==null?I("KeyNotFoundException"):n.$0}function te(t,e){for(let n=0,r=e.length-1;n<=r;n++)t(e[n])}function Yr(t,e){let n=null,r=0;for(;r<e.length&&n==null;){let s=t(e[r]);s!=null&&s.$==1&&(n=s),r=r+1}return n}function Yn(t,e){let n=null,r=0;for(;r<e.length&&n==null;)t(e[r])&&(n=w(r)),r=r+1;return n}function Zr(t,e){let n=new Array(t);for(let r=0,s=t-1;r<=s;r++)n[r]=e;return n}function yl(t){return Array.prototype.concat.apply([],Ae(t))}function Xr(t,e){let n=!1,r=0;for(;!n&&r<V(e);)t(e[r])?n=!0:r=r+1;return n}function Zn(t,e,n){let r=n,s=e.length;for(let o=1,l=s;o<=l;o++)r=t(e[s-o],r);return r}function $e(t,e){let n=new Array(e.length);for(let r=0,s=e.length-1;r<=s;r++)n[r]=t(e[r]);return n}function Ae(t){if(t instanceof Array)return t.slice();if(t instanceof F)return zr(t);{let e=[],n=D(t);try{for(;n.MoveNext();)e.push(n.Current);return e}finally{typeof n=="object"&&j(n)&&n.Dispose()}}}function Cl(t,e){return Ae(Mr(t,e))}function ht(t,e){let n=[];for(let r=0,s=e.length-1;r<=s;r++)t(e[r])&&n.push(e[r]);return n}function Qr(t,e){let n=!0,r=0;for(;n&&r<V(e);)t(e[r])?r=r+1:n=!1;return n}function Nl(t){mu(e=>e[0],pu((e,n)=>[n,e],t).sort(ke))}var gn=class extends W{Next_1(e){return e<0?I("'maxValue' must be greater than zero."):Math.floor(Math.random()*e)}},re=class extends W{AsyncBase(e,n){return G(()=>{let s=ou(this.Headers),o=su(n);return S(al(),l=>S(Bn((i,c,a)=>{let m=[!0],$=Jr(l,()=>{m[0]&&(m[0]=!1,a(new Dt("New",l)))});return ru().Async(this.EndPoint+"/"+e,s,o,p=>{m[0]&&(m[0]=!1,$.Dispose(),i(p))},p=>{m[0]&&(m[0]=!1,$.Dispose(),c(p))})}),i=>J(JSON.parse(i))))})}get EndPoint(){return lu()}get Headers(){return[]}Async(e,n){return this.AsyncBase(e,n)}};function We(t){return()=>e=>{let n=t();return Bs(V(e),r=>n(_(e,r)))}}function B(){return()=>t=>t}function Re(t,e,n){return()=>r=>{let s;if(typeof r=="object"&&r!=null){let l={};if(typeof e=="string"){let i=r[e];s=wl(c=>!b(c,null)&&c[0]==i,n)}else{let i=[void 0],c;for(var o in e)if((a=>r.hasOwnProperty(a)&&(i[0]=e[a],!0))(o))break;s=i[0]}return l.$=s,te(i=>{let c=i[0],a=i[1],m=i[2],$=i[3];if(c==null){let p=m()(r);a&&delete p[e],l.$0=p;return}else return $===0?void(l[c]=m()(r[a])):$===1?void(l[c]=r.hasOwnProperty(a)?w(m()(r[a])):null):I("Invalid field option kind")},_(n,s)[1]),t===void 0?l:U(t,l)}else return r}}function It(t,e){return()=>n=>{let r={};return te(s=>{let o=s[0],l=s[1],i=s[2];return i===0?n.hasOwnProperty(o)?void(r[o]=l()(n[o])):I("Missing mandatory field: "+o):i===1?void(r[o]=n.hasOwnProperty(o)?w(l()(n[o])):null):i===2?n.hasOwnProperty(o)?void(r[o]=l()(n[o])):null:i===3?n[o]===void 0?void(r[o]=l()(n[o])):null:I("Invalid field option kind")},e),t===void 0?r:U(t,r)}}function vl(){return()=>t=>t.hasOwnProperty("d")?new Date(t.d).getTime():new Date(t).getTime()}function Al(t,e,n){return()=>r=>{if(typeof r=="object"&&r!=null){let s={},o=_(n,r.$);return b(typeof e,"string")&&(s[e]=o[0]),te(l=>{let i=l[0],c=l[1],a=l[2],m=l[3];if(i==null){let p=a()(r.$0),v;for(var $ in p)if((T=>(s[T]=p[T],!1))($))break;return}else if(m===0){s[c]=a()(r[i]);return}else if(m===1){let p=r[i];return p==null?null:void(s[c]=a()(p.$0))}else return I("Invalid field option kind")},o[1]),s}else return r}}function Nr(t){return()=>e=>new Hn("New_2",Fu($e(t(),e)))}function dt(t){if(t instanceof Array)return t;if(t instanceof F)return zr(t);if(t===null)return[];{let e=[],n=D(t);try{for(;n.MoveNext();)e.push(n.Current);return e}finally{typeof n=="object"&&j(n)&&n.Dispose()}}}function pt(t,e,n){let r=V(n);function s(o){return l=>{let i;switch(l<=0?0:l===1&&o>=0&&o<r?1:(i=l,2)){case 0:return t;case 1:return _(n,o);case 2:let c=l/2>>0;return e(s(o)(c),s(o+c)(l-c))}}}return s(0)(r)}function Sl(t,e,n,r){let s=V(r);function o(l){return i=>{let c;switch(i<=0?0:i===1&&l>=0&&l<s?1:(c=i,2)){case 0:return e;case 1:return t(_(r,l));case 2:let a=i/2>>0;return n(o(l)(a),o(l+a)(i-a))}}}return o(0)(s)}function vr(t,e){let n=new Date(t);switch(e){case"D":return String(es().get_Item(n.getDay()))+", "+R(2,String(n.getDate()))+" "+String(ts().get_Item(n.getMonth()))+" "+String(n.getFullYear());case"d":return R(2,String(n.getMonth()+1))+"/"+R(2,String(n.getDate()))+"/"+String(n.getFullYear());case"T":return R(2,String(n.getHours()))+":"+R(2,String(n.getMinutes()))+":"+R(2,String(n.getSeconds()));case"t":return R(2,String(n.getHours()))+":"+R(2,String(n.getMinutes()));case"o":case"O":return String(n.getFullYear())+"-"+R(2,String(n.getMonth()+1))+"-"+R(2,String(n.getDate()))+"T"+R(2,String(n.getHours()))+":"+R(2,String(n.getMinutes()))+":"+R(2,String(n.getSeconds()))+"."+R(3,String(n.getMilliseconds()))+$n(n);default:return ns(n,e)}}function es(){return mt.longDays}function R(t,e){return e.length<t?Jn(t-e.length,"0")+e:e}function ts(){return mt.longMonths}function $n(t){let e=t.getTimezoneOffset()*-6e4,n=Math.abs(e);return(e<0?"-":"+")+R(2,String(vt(n/36e5)))+":"+R(2,String(vt(n%36e5/6e4)))}function ns(t,e){let n=0,r=0,s="",o=l=>{s=s+l};for(;n<e.length;)(()=>{let l=e[n];switch(l){case"d":switch(r=le(e,n,"d"),n=n+r,r){case 1:return o(String(t.getDate()));case 2:return o(R(2,String(t.getDate())));case 3:return o(String(bl().get_Item(t.getDay())));default:case 4:return o(String(es().get_Item(t.getDay())))}break;case"f":switch(r=le(e,n,"f"),n=n+r,r){case 3:case 2:case 1:let x=vt(10**(3-r));return o(R(r,String(t.getMilliseconds()/x>>0)));case 7:case 6:case 5:case 4:return o(_l(r,String(t.getMilliseconds())));default:return I("Input string was not in a correct format.")}break;case"F":switch(r=le(e,n,"F"),n=n+r,r){case 3:case 2:case 1:let x=vt(10**(3-r)),N=t.getMilliseconds()/x>>0;return N!==0?o(R(r,String(N))):null;case 7:case 6:case 5:case 4:let d=t.getMilliseconds();return d!==0?o(R(3,String(d))):null;default:return I("Input string was not in a correct format.")}break;case"g":return r=le(e,n,"g"),n=n+r,o("A.D.");case"h":r=le(e,n,"h"),n=n+r;let i=t.getHours()%12;return o(r===1||r===2&&!1?i===0?"12":String(i):i===0?"12":R(2,String(i)));case"H":return r=le(e,n,"H"),n=n+r,o(r===1||r===2&&!1?String(t.getHours()):R(2,String(t.getHours())));case"K":return r=le(e,n,"K"),n=n+r,o(Jn(r,$n(t)));case"m":return r=le(e,n,"m"),n=n+r,o(r===1||r===2&&!1?String(t.getMinutes()):R(2,String(t.getMinutes())));case"M":let c;switch(r=le(e,n,"M"),n=n+r,r){case 1:c=String(t.getMonth()+1);break;case 2:c=R(2,String(t.getMonth()+1));break;case 3:c=String(xl().get_Item(t.getMonth()));break;default:case 4:c=String(ts().get_Item(t.getMonth()));break}return o(c);case"s":return r=le(e,n,"s"),n=n+r,o(r===1||r===2&&!1?String(t.getSeconds()):R(2,String(t.getSeconds())));case"t":return r=le(e,n,"t"),n=n+r,o(r===1||r===2&&!1?t.getHours()<12?"A":"P":t.getHours()<12?"AM":"PM");case"y":return r=le(e,n,"y"),n=n+r,o(r===1?String(t.getFullYear()%100):r===2?R(2,String(t.getFullYear()%100)):R(r,String(t.getFullYear())));case"z":r=le(e,n,"z"),n=n+r;let a=$n(t),m=sn(a,0,1),$=sn(a,1,2),p=sn(a,4,2);return o(r===1?m+(_t($,"0")?$.substring(1):$):r===2?m+$:m+$+":"+p);case":":return n=n+1,o(":");case"/":return n=n+1,o("/");case"'":case'"':let v=Tl(e,n);return n=n+v[1],o(v[0]);case"%":let T=Ar(e,n);return T!=null&&T.$0!=="%"?(n=n+2,o(ns(t,T.$0))):I("Invalid format string");case"\\":let H=Ar(e,n);return H==null?I("Invalid format string"):(n=n+2,o(H.$0));default:o(l);{n=n+1;return}break}})();return s}function le(t,e,n){let r=0,s=e;for(;s<t.length&&t[s]===n;)s=s+1,r=r+1;return r}function bl(){return mt.shortDays}function _l(t,e){return e.length<t?e+Jn(t-e.length,"0"):e}function xl(){return mt.shortMonths}function Tl(t,e){let n=t[e],r="",s=!1,o=e,l=!1;for(;o<t.length&&!l;){o=o+1;let i=t[o];i===n?(s=!0,l=!0):i==="\\"?o<t.length?(o=o+1,r=r+t[o]):I("Invalid string format"):r=r+i}return s||I("Invalid string format could not find matching quote for "+String(n)),[r,o-e+1]}function Ar(t,e){return e>=t.length-1?null:w(t[e+1])}var ne=class extends W{ForTextView(){return console.warn("Content hole filled with attribute data",this.Name),null}AddAttribute(e,n){console.warn("Var hole filled with non-Var data",this.Name)}get AsChoiceView(){return console.warn("Attribute value hole filled with non-text data",this.Name),sr("")}},xt=class extends ne{name;fillWith;get Name(){return this.name}get Value(){return this.fillWith}constructor(e,n){super(),this.name=e,this.fillWith=n}};function El(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]","g"),t=>{let e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}function Dl(t,e,n,r){let s=r==null?null:w(r.$0),o=Js(n.PlayerOrder);return f.Element("div",[C.Create("class","d-flex flex-wrap justify-content-start mt-3")],ye(Y(()=>At(l=>{let i=l[1],c=i==e,a=c?s==null?me([f.TextNode("(n/a)")]):nt(kl,s.$0.Hand):ye(Y(()=>At(()=>[f.Element("span",[C.Create("class","me-1")],[f.TextNode("\u{1F0A0}")])],an(1,2))));return[f.Element("div",[C.Create("class",(c?"bg-light":"bg-secondary")+" text-dark rounded p-3 me-3 mb-3 position-relative"),C.Create("style","min-width: 300px; flex: 1; max-width: 48%;")],[f.Element("div",[C.Create("class","position-absolute top-0 start-0 fw-bold text-white bg-dark px-2"),C.Create("style","border-bottom-right-radius: 0.5rem;")],[f.TextNode(String(l[0]+1)+".")]),f.Element("h5",[C.Create("class","fw-bold mb-2"),C.Create("style","margin-left: 15px")],[f.TextNode(c?"You":i)]),f.Element("div",[],a),f.Element("div",[C.Create("class","mt-2")],[f.Element("button",[C.Create("class","btn btn-sm btn-primary me-2")],[f.TextNode("Draw")]),f.Element("button",[C.Create("class","btn btn-sm btn-warning")],[f.TextNode("Pass")])])])]},o))))}function kl(t){let e=[C.Create("class","me-1")],n=t.Rank,r=t.Suit,s=[f.TextNode((n.$==1?"3":n.$==2?"4":n.$==3?"5":n.$==4?"6":n.$==5?"7":n.$==6?"8":n.$==7?"9":n.$==8?"10":n.$==9?"J":n.$==10?"Q":n.$==11?"K":n.$==12?"A":"2")+(r.$==1?"\u2666":r.$==2?"\u2663":r.$==3?"\u2660":"\u2665"))];return f.Element("span",e,s)}function Fl(t,e){return ku(t,-2147483648,2147483647,e)}function Le(){return Gl(Sr()+1),Sr()}function Gl(t){nr.counter=t}function Sr(){return nr.counter}function Vt(t,e){return{$:2,$0:t,$1:e}}function Se(t){return{$:0,$0:t}}function be(t,e){return{$:3,$0:t,$1:e}}function Rl(t){return{$:5,$0:t}}function Il(t,e){return{$:0,$0:t,$1:e}}function Vl(t){return{$:2,$0:t}}function rs(t){return{$:6,$0:t}}function Ml(t){return{$:1,$0:t}}function Ol(t){return{$:4,$0:t}}function Tt(t){return C.A3(t)}function wn(t){return Sl(e=>e.NChanged,Oe(),Pe,t.DynNodes)}function Pl(t,e){if(t===null)return e;if(e===null)return t;{let n=C.A2(t,e);return Ll(n,yn(t)|yn(e)),n}}function ss(){return O.EmptyAttr}function os(t,e){return C.A1(new On(t,e))}function Xn(t,e){let n=[],r=[];function s(i){for(;;)if(i!==null){if(i!=null&&i.$==1)return n.push(i.$0);if(i!=null&&i.$==2){let c=i.$1,a=i.$0;s(a),i=c}else return i!=null&&i.$==3?i.$0(t):i!=null&&i.$==4?r.push(i.$0):null}else return null}s(e);let o=n.slice(0);return fs(t,yn(e),o,r.length===0?null:w(i=>{ro(c=>{c(i)},r)}))}function on(t){return fs(t,0,[],null)}function Ll(t,e){t.flags=e}function yn(t){return t!==null&&t.hasOwnProperty("flags")?t.flags:0}function Hl(t){return(t.DynFlags&2)===2}function Ul(t){return Qn(t,(e,n)=>e.NGetExitAnim(n))}function Wl(t){return(t.DynFlags&1)===1}function ql(t){return Qn(t,(e,n)=>e.NGetEnterAnim(n))}function jl(t){return(t.DynFlags&4)===4}function Bl(t){return Qn(t,(e,n)=>e.NGetChangeAnim(n))}function Qn(t,e){return Lt($e(n=>e(n,t.DynElem),t.DynNodes))}function ls(t,e){te(n=>{n.NSync(t)},e.DynNodes)}function Jl(t){let e=globalThis.document.createElement("div");if(Kl().test(t)){let l=function(i,c){for(;;){if(c===0)return i;{let a=c;i=i.lastChild,c=a-1}}},n=Xl().exec(t),r=b(n,null)?"":_(n,1).toLowerCase(),s=zl()[r],o=s||Yl();return e.innerHTML=o[1]+t.replace(Zl(),"<$1></$2>")+o[2],l(e,o[0])}else return e.appendChild(globalThis.document.createTextNode(t)),e}function br(t){let e=[];for(let n=0,r=t.childNodes.length-1;n<=r;n++)e.push(t.childNodes[n]);return e}function Kl(){return Qe.rhtml}function zl(){return Qe.wrapMap}function Yl(){return Qe.defaultWrap}function Zl(){return Qe.rxhtmlTag}function Xl(){return Qe.rtagName}function Ql(t,e,n){let r=t.querySelectorAll(e);for(let s=0,o=r.length-1;s<=o;s++)n(r[s])}function ei(t,e){let n=globalThis.document.querySelectorAll(t);for(let r=0,s=n.length-1;r<=s;r++)e(n[r])}function ti(t,e,n){let r;if(n.parentNode===t){let s=n.nextSibling,o=b(s,null)?null:s;r=e===o}else r=!1;r||t.insertBefore(n,e)}function ni(t,e){e.parentNode===t&&t.removeChild(e)}function Mt(t,e){return{k:t,ct:e}}function er(t){return{$:1,$0:t}}function Ot(t){return{$:0,$0:t}}function is(t){return{$:2,$0:t}}var Ye=oe(t=>class{static{Ye=t(this)}static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static{this.noneCT=ri(!1,[]),this.scheduler=new xn,this.defCTS=[new Tn],this.Zero=J(),this.GetCT=n=>{n.k(Ot(n.ct))}}});function ri(t,e){return{c:t,r:e}}function si(){return{Current:null,Dirty:!1}}function oi(t,e){t.Current=e,t.Dirty=!0}function tr(t,e){lt(t.parentNode,e,t)}function li(t,e,n){return yu(Cu(),fi(t,e,ss(),n))}function ii(t,e,n){return hs()?G(()=>{let s=ms(n),o=pi(e,s),l=di(e,s);return S(Tr(eu(o,hi(e,s))),()=>S(_r(t,e),()=>S(Tr(l),()=>(e.PreviousNodes=s,J(null)))))}):_r(t,e)}function ui(t,e,n){let r=ms(n);it(t,e.Top),e.PreviousNodes=r}function ci(t,e,n){Cn(t,n);let r=Xn(t,e);return De.New(r,n,null,t,Le(),_e(r.OnAfterRender))}function Cn(t,e){lt(t,e,null)}function ai(t,e){let n=t.parentNode,r=globalThis.document.createTextNode("");return n.insertBefore(r,t),tr(t,e),r}function lt(t,e,n){for(;;){if(e!=null&&e.$==1)return Ct(t,e.$0.El,n);if(e!=null&&e.$==2){let r=e.$0;r.Dirty=!1,e=r.Current}else{if(e==null)return n;if(e!=null&&e.$==4)return Ct(t,e.$0.Text,n);if(e!=null&&e.$==5)return Ct(t,e.$0,n);if(e!=null&&e.$==6)return Zn((r,s)=>(o=>l=>i=>l==null||l.constructor===Object?lt(o,l,i):Ct(o,l,i))(t)(r)(s),e.$0.Els,n);{let r=e.$1;e=e.$0,n=lt(t,r,n)}}}}function fi(t,e,n,r){let s=t.parentNode;tr(e,r);let o=Xn(s,n);return De.New(o,r,w([t,e]),s,Le(),_e(o.OnAfterRender))}function _r(t,e){if(ds()){let n=r=>{requestAnimationFrame(()=>{it(t,e.Top),r()})};return Bn((r,s,o)=>n.apply(null,[r,s,o]))}else return it(t,e.Top),J(null)}function hi(t,e){return Lt($e(n=>Ul(n.Attr),lr(gs(e,or(n=>Hl(n.Attr),t.PreviousNodes)))))}function di(t,e){return Lt($e(n=>ql(n.Attr),lr(gs(t.PreviousNodes,or(n=>Wl(n.Attr),e)))))}function pi(t,e){let n=s=>jl(s.Attr),r=s=>or(n,s);return Lt($e(s=>Bl(s.Attr),lr(Nu(r(t.PreviousNodes),r(e)))))}function it(t,e){t||$i(e),us(e.Children),cs(e)}function mi(){return{Text:globalThis.document.createTextNode(""),Dirty:!1,Value:""}}function gi(t,e){t.Value=e,t.Dirty=!0}function Ct(t,e,n){return ti(t,n,e),e}function $i(t){function e(n){function r(s){for(;;)if(s!=null&&s.$==0){let o=s.$1,l=s.$0;if(r(l))return!0;s=o}else if(s!=null&&s.$==2){let o=s.$0;if(o.Dirty)return!0;s=o.Current}else if(s!=null&&s.$==6){let o=s.$0;return o.Dirty||Xr(e,o.Holes)}else return!1}return r(n.Children)}ls(t.El,t.Attr),e(t)&&wi(t)}function us(t){for(;;){if(t!=null&&t.$==1)return it(!1,t.$0);if(t!=null&&t.$==2)t=t.$0.Current;else{if(t==null)return null;if(t!=null&&t.$==5)return null;if(t!=null&&t.$==4){let e=t.$0;return e.Dirty?(e.Text.nodeValue=e.Value,e.Dirty=!1):null}else if(t!=null&&t.$==6){let e=t.$0;return te(n=>{it(!1,n)},e.Holes),te(n=>{ls(n[0],n[1])},e.Attrs),cs(e)}else{let e=t.$1,n=t.$0;us(n),t=e}}}}function cs(t){let e=_e(t.Render);e!=null&&e.$==1&&(e.$0(t.El),Ve(t,"Render",null))}function wi(t){let e=t.El;function n(l,i){for(;;){if(l!=null&&l.$==1)return l.$0.El;if(l!=null&&l.$==2){let c=l.$0;if(c.Dirty)return c.Dirty=!1,lt(e,c.Current,i);l=c.Current}else{if(l==null)return i;if(l!=null&&l.$==4)return l.$0.Text;if(l!=null&&l.$==5)return l.$0;if(l!=null&&l.$==6){let c=l.$0;return c.Dirty&&(c.Dirty=!1),Zn((a,m)=>a==null||a.constructor===Object?n(a,m):a,c.Els,i)}else{let c=l.$1;l=l.$0,i=n(c,i)}}}}let r=t.El;Hu(l=>{ni(r,l)},Lu(Uu(t),Pu(t.El,_e(t.Delimiters))));let s=t.Children,o=_e(t.Delimiters);n(s,o!=null&&o.$==1?o.$0[1]:null)}var ae=class t extends W{equals;hash;data;count;SAdd(e){return this.add(e)}Contains(e){let n=this.data[this.hash(e)];return n==null?!1:this.arrContains(e,n)}add(e){let n=this.hash(e),r=this.data[n];return r==null?(this.data[n]=[e],this.count=this.count+1,!0):this.arrContains(e,r)?!1:(r.push(e),this.count=this.count+1,!0)}arrContains(e,n){let r=!0,s=0,o=n.length;for(;r&&s<o;)this.equals.apply(null,[n[s],e])?r=!1:s=s+1;return!r}GetEnumerator(){return D(un(this.data))}ExceptWith(e){let n=D(e);try{for(;n.MoveNext();)this.Remove(n.Current)}finally{typeof n=="object"&&j(n)&&n.Dispose()}}get Count(){return this.count}IntersectWith(e){let n=new t("New_4",e,this.equals,this.hash),r=un(this.data);for(let s=0,o=r.length-1;s<=o;s++){let l=r[s];n.Contains(l)||this.Remove(l)}}Remove(e){let n=this.data[this.hash(e)];return n==null?!1:this.arrRemove(e,n)&&(this.count=this.count-1,!0)}CopyTo(e,n){let r=un(this.data);for(let s=0,o=r.length-1;s<=o;s++)Wn(e,s+n,r[s])}arrRemove(e,n){let r=!0,s=0,o=n.length;for(;r&&s<o;)this.equals.apply(null,[n[s],e])?(n.splice(s,1),r=!1):s=s+1;return!r}static New_3(){return new this("New_3")}static New_4(e,n,r){return new this("New_4",e,n,r)}static New_2(e){return new this("New_2",e)}constructor(e,n,r,s){e=="New_3"&&(e="New_4",n=[],r=b,s=He);let o;if(e=="New_2"&&(o=n,e="New_4",n=o,r=b,s=He),e=="New_4"){let l=n,i=r,c=s;super(),this.equals=i,this.hash=c,this.data=[],this.count=0;let a=D(l);try{for(;a.MoveNext();)this.add(a.Current)}finally{typeof a=="object"&&j(a)&&a.Dispose()}}}},Nn=class extends ne{name;fillWith;get Name(){return this.name}ForTextView(){return w(this.fillWith.View)}AddAttribute(e,n){e(n)(jr(this.fillWith))}get AsChoiceView(){return Xe(M(String,this.fillWith.View))}constructor(e,n){super(),this.name=e,this.fillWith=n}},vn=class extends ne{name;fillWith;get Name(){return this.name}ForTextView(){return w(M(String,this.fillWith.View))}AddAttribute(e,n){e(n)(rl(this.fillWith))}get AsChoiceView(){return Xe(M(String,this.fillWith.View))}constructor(e,n){super(),this.name=e,this.fillWith=n}},An=class extends ne{name;fillWith;get Name(){return this.name}ForTextView(){return w(M(String,this.fillWith.View))}AddAttribute(e,n){e(n)(sl(this.fillWith))}get AsChoiceView(){return Xe(M(String,this.fillWith.View))}constructor(e,n){super(),this.name=e,this.fillWith=n}},Sn=class extends ne{name;fillWith;get Name(){return this.name}ForTextView(){return w(M(e=>new Date(e).toLocaleString(),this.fillWith.View))}AddAttribute(e,n){e(n)(ol(this.fillWith))}get AsChoiceView(){return Xe(M(e=>new Date(e).toLocaleString(),this.fillWith.View))}constructor(e,n){super(),this.name=e,this.fillWith=n}},bn=class extends ne{name;fillWith;get Name(){return this.name}ForTextView(){return w(M(String,this.fillWith.View))}AddAttribute(e,n){e(n)(ll(this.fillWith))}get AsChoiceView(){return Xe(M(String,this.fillWith.View))}constructor(e,n){super(),this.name=e,this.fillWith=n}},Et=class extends ne{name;fillWith;get Name(){return this.name}get Value(){return this.fillWith}constructor(e,n){super(),this.name=e,this.fillWith=n}},_n=class extends ne{name;fillWith;get Name(){return this.name}ForTextView(){return w(M(e=>Ue(",",e),this.fillWith.View))}AddAttribute(e,n){e(n)(il(this.fillWith))}get AsChoiceView(){return Xe(M(String,this.fillWith.View))}constructor(e,n){super(),this.name=e,this.fillWith=n}};function yi(t){Ni()||(vi(!0),Ai(globalThis.document.body,"")),ut().set_Item(t,Pt(""))}function Ci(t,e,n){let r,s=(r=null,[Pt(t).TryGetValue(e==null?"":e.$0,{get:()=>r,set:o=>{r=o}}),r]);return s[0]?Si(s[1].cloneNode(!0),n):(console.warn("Local template doesn't exist",e),f.Empty)}function Ni(){return Ze.LocalTemplatesLoaded}function vi(t){Ze.LocalTemplatesLoaded=t}function Ai(t,e){let n=Pt(e),r=new ue("New_5"),s=t.querySelectorAll("[ws-template]");for(let m=0,$=s.length-1;m<=$;m++){let p=s[m],v=p.getAttribute("ws-template").toLowerCase();p.removeAttribute("ws-template"),r.set_Item(v,as(p))}let o=t.querySelectorAll("[ws-children-template]");for(let m=0,$=o.length-1;m<=$;m++){let p=o[m],v=p.getAttribute("ws-children-template").toLowerCase();p.removeAttribute("ws-children-template"),r.set_Item(v,bi(p))}let l=t.querySelectorAll("template[id]");for(let m=0,$=l.length-1;m<=$;m++){let p=l[m];r.set_Item(p.getAttribute("id").toLowerCase(),xr(p))}let i=t.querySelectorAll("template[name]");for(let m=0,$=i.length-1;m<=$;m++){let p=i[m];r.set_Item(p.getAttribute("name").toLowerCase(),xr(p))}let c=new ae("New_3");function a(m){if(!n.ContainsKey(m)){let $,p=($=null,[r.TryGetValue(m,{get:()=>$,set:v=>{$=v}}),$]);p[0]?(c.SAdd(m),r.RemoveKey(m),rt(e,w(m),p[1],w(a))):console.warn(c.Contains(m)?"Encountered loop when instantiating "+m:"Local template does not exist: "+m)}}for(;r.count>0;)a(Xs(r.Keys))}function ut(){return Ze.LoadedTemplates}function Pt(t){let e,n=(e=null,[ut().TryGetValue(t,{get:()=>e,set:r=>{e=r}}),e]);if(n[0])return n[1];{let r=new ue("New_5");return ut().set_Item(t,r),r}}function Si(t,e){let n,r=_i(t,he(e,xi().Values)),s=r[1],o=r[0],l=o.Els;return!b(l,null)&&l.length===1&&_(l,0)instanceof Node&&b(_(l,0).nodeType,Node.ELEMENT_NODE)&&(n=_(l,0),!0)?ft.TreeNode(o,s):f.Mk(rs(o),s)}function as(t){t.removeAttribute("ws-template");let e=t.getAttribute("ws-replace");if(e!=null){t.removeAttribute("ws-replace");let r=t.parentNode;if(!b(r,null)){let s=globalThis.document.createElement(t.tagName);s.setAttribute("ws-replace",e),r.replaceChild(s,t)}}let n=globalThis.document.createElement("div");return n.appendChild(t),n}function bi(t){let e=globalThis.document.createElement("div");for(;t.hasChildNodes();)e.appendChild(t.firstChild);return e}function xr(t){let e=globalThis.document.createElement("div"),n=t.content;for(let r=0,s=n.childNodes.length-1;r<=s;r++)e.appendChild(n.childNodes[r].cloneNode(!0));return e}function rt(t,e,n,r){let s=new ae("New_3");function o(p,v){for(;;)switch(p){case 0:if(v!==null){let u=v.nextSibling;b(v.nodeType,Node.TEXT_NODE)?iu(v):b(v.nodeType,Node.ELEMENT_NODE)&&i(v),v=u}else return null;break;case 1:let T=Ce(v.nodeName,w(3),null).toLowerCase(),H=T.indexOf("."),x=H===-1?[t,T]:[Ce(T,null,w(H-1)),Ce(T,w(H+1),null)],N=x[1],d=x[0];if(d!=""&&!ut().ContainsKey(d))return Dr(N);{d==""&&r!=null&&r.$0(N);let u=ut().Item(d);if(u.ContainsKey(N)){let g=u.Item(N).cloneNode(!0),y=new ae("New_3"),A=new ue("New_5"),k=v.attributes;for(let P=0,K=k.length-1;P<=K;P++){let L=k.item(P).name.toLowerCase(),se=k.item(P).nodeValue,de=se==""?L:se.toLowerCase();A.set_Item(L,de),y.SAdd(L)||console.warn("Hole mapped twice",L)}for(let P=0,K=v.childNodes.length-1;P<=K;P++){let L=v.childNodes[P];b(L.nodeType,Node.ELEMENT_NODE)&&(y.SAdd(L.nodeName.toLowerCase())||console.warn("Hole filled twice",N))}let q=v.childNodes.length===1&&b(v.firstChild.nodeType,Node.TEXT_NODE);if(q){let P=uu(g,v.firstChild.textContent,N),K=(se=>de=>se.SAdd(de))(y);(se=>de=>{de!=null&&se(de.$0)})(se=>{K(se)})(P)}if(cu(g,y),!q)for(let P=0,K=v.childNodes.length-1;P<=K;P++){let L=v.childNodes[P];b(L.nodeType,Node.ELEMENT_NODE)&&(L.hasAttributes()?au(g,L):l(g,L))}fu(g,A),kr(g,v.parentNode,v),v.parentNode.removeChild(v);return}else return Dr(N)}break}}function l(p,v){let T=v.nodeName.toLowerCase(),H=(N,d)=>{if(T=="title"&&v.hasChildNodes()){let u=Jl(v.textContent);for(v.removeChild(v.firstChild);u.hasChildNodes();)v.appendChild(u.firstChild)}return i(v),kr(v,N,d)};Q(p,"[ws-attr-holes]",N=>{let d=ge(N.getAttribute("ws-attr-holes"),[" "],1);for(let u=0,h=d.length-1;u<=h;u++){let g=_(d,u),y=new RegExp("\\${"+T+"}","ig"),A=N.getAttribute(g).replace(y,v.textContent);N.setAttribute(g,A)}});let x=p.querySelector("[ws-hole="+T+"]");if(b(x,null)){let N=p.querySelector("[ws-replace="+T+"]");if(b(N,null)){let d=p.querySelector("slot[name="+T+"]");return p.tagName.toLowerCase()=="template"?(H(d.parentNode,d),void d.parentNode.removeChild(d)):null}else{H(N.parentNode,N),N.parentNode.removeChild(N);return}}else{for(;x.hasChildNodes();)x.removeChild(x.lastChild);return x.removeAttribute("ws-hole"),H(x,null)}}function i(p){p.hasAttribute("ws-preserve")||(_t(p.nodeName.toLowerCase(),"ws-")?a(p):(ps(p),c(p.firstChild)))}function c(p){return o(0,p)}function a(p){return o(1,p)}function m(p){for(;;){let v=p.querySelector("[ws-template]");if(b(v,null)){let T=p.querySelector("[ws-children-template]");if(b(T,null)){let H=p.querySelectorAll("template[id]");for(let N=1,d=H.length-1;N<=d;N++){let u=H[N];s.Contains(u)||(rt(t,w(u.getAttribute("id")),u,null),s.SAdd(u))}let x=p.querySelectorAll("template[name]");for(let N=1,d=x.length-1;N<=d;N++){let u=x[N];s.Contains(u)||(rt(t,w(u.getAttribute("name")),u,null),s.SAdd(u))}return null}else{let H=T.getAttribute("ws-children-template");T.removeAttribute("ws-children-template"),rt(t,w(H),T,null),p=p}}else{let T=v.getAttribute("ws-template");Ti(t,w(T),v)(null),p=p}}}let $=(e==null?"":e.$0).toLowerCase();Pt(t).set_Item($,n),n.hasChildNodes()&&(m(n),c(n.firstChild))}function _i(t,e){let n,r=[],s=[],o=[],l=[],i=new ue("New_5"),c=D(e);try{for(;c.MoveNext();){let u=c.Current;i.set_Item(u.Name,u)}}finally{typeof c=="object"&&j(c)&&c.Dispose()}let a=br(t),m=(u,h)=>{let g=Xn(u,h);s.push(wn(g)),o.push([u,g]);let y=_e(g.OnAfterRender);if(y==null)return null;{let A=y.$0;l.push(()=>{A(u)});return}},$=u=>{let h,g=(h=null,[i.TryGetValue(u,{get:()=>h,set:y=>{h=y}}),h]);if(g[0]){let y=g[1];if(y instanceof xt)return w(y.Value);if(y instanceof kn)return w(f.TextNode(y.Value));{let A=y.ForTextView();return A==null?null:w(f.TextView(A.$0))}}else return null};Q(t,"[ws-hole]",u=>{let h=u.getAttribute("ws-hole");for(u.removeAttribute("ws-hole");u.hasChildNodes();)u.removeChild(u.lastChild);let g=$(h);if(g!=null&&g.$==1){let y=g.$0;Cn(u,y.docNode),r.push(De.New(on(u),y.docNode,null,u,Le(),null)),s.push(y.updates)}}),Q(t,"[ws-replace]",u=>{let h=$(u.getAttribute("ws-replace"));if(h!=null&&h.$==1){let g=h.$0,y=u.parentNode,A=globalThis.document.createTextNode("");y.replaceChild(A,u);let k=ai(A,g.docNode);a=br(t);let q=Yn(P=>u===P,a);q==null||Wn(a,q.$0,g.docNode),r.push(De.New(on(y),g.docNode,w([k,A]),y,Le(),null)),s.push(g.updates)}});let p=!1;Q(t,"slot",u=>{let h=u.getAttribute("name"),g=h==""||h==null?"default":h.toLowerCase();if(!(p&&g=="default"||!b(t.parentElement,null))){for(;u.hasChildNodes();)u.removeChild(u.lastChild);g=="default"&&(p=!0);let y=$(g);if(y!=null&&y.$==1){let A=y.$0;Cn(u,A.docNode),r.push(De.New(on(u),A.docNode,null,u,Le(),null)),s.push(A.updates)}}}),Q(t,"[ws-attr]",u=>{let h,g=u.getAttribute("ws-attr");u.removeAttribute("ws-attr");let y=(h=null,[i.TryGetValue(g,{get:()=>h,set:A=>{h=A}}),h]);if(y[0]){let A=y[1];A instanceof Fn?m(u,A.Value):console.warn("Attribute hole filled with non-attribute data",g)}}),Q(t,"[ws-on]",u=>{m(u,C.Concat(zn(h=>{let g,y=ge(h,[":"],1),A=(g=null,[i.TryGetValue(_(y,1),{get:()=>g,set:k=>{g=k}}),g]);if(A[0]){let k=A[1];return k instanceof Gn?w(Ne(_(y,0),k.Value)):k instanceof Rn?w(C.Handler(_(y,0),k.Value)):(console.warn("Event hole on"+_(y,0)+" filled with non-event data",_(y,1)),null)}else return null},ge(u.getAttribute("ws-on"),[" "],1)))),u.removeAttribute("ws-on")}),Q(t,"[ws-onafterrender]",u=>{let h,g=u.getAttribute("ws-onafterrender"),y=(h=null,[i.TryGetValue(g,{get:()=>h,set:A=>{h=A}}),h]);if(y[0]){let A=y[1];A instanceof In||A instanceof Vn?(u.removeAttribute("ws-onafterrender"),m(u,yr(A.Value))):console.warn("onafterrender hole filled with non-onafterrender data",g)}}),Q(t,"[ws-var]",u=>{let h,g=u.getAttribute("ws-var");u.removeAttribute("ws-var");let y=(h=null,[i.TryGetValue(g,{get:()=>h,set:A=>{h=A}}),h]);y[0]&&y[1].AddAttribute(A=>k=>m(A,k),u)});let v=()=>{Ei("[ws-dom]",u=>{let h,g,y,A=(h=null,[i.TryGetValue(u.getAttribute("ws-dom").toLowerCase(),{get:()=>h,set:k=>{h=k}}),h]);if(A[0]){let k=A[1];if(k instanceof Et){let q=k.Value;u.removeAttribute("ws-dom"),g=u;let P=new MutationObserver((K,L)=>{te(se=>{se.removedNodes.forEach(hr(de=>de[0]===g&&se.addedNodes.length!==1?(q.SetFinal(null),L.disconnect()):null),null)},K)});u.parentElement!==null&&P.observe(u.parentElement,(y={},y.childList=!0,y)),q.Set(w(u)),Hr(K=>{if(K!=null&&K.$==1){let L=K.$0;g===L||(g.replaceWith(L),g=L)}else g.remove(),P.disconnect()},q.View)}}})};Q(t,"[ws-attr-holes]",u=>{let h=new RegExp(ct(),"g"),g=ge(u.getAttribute("ws-attr-holes"),[" "],1);u.removeAttribute("ws-attr-holes");for(let y=0,A=g.length-1;y<=A;y++)(()=>{let k,q=_(g,y),P=u.getAttribute(q),K=null,L=0,se=[];for(;K=h.exec(P),K!==null;){let fe=Ce(P,w(L),w(h.lastIndex-_(K,0).length-1));L=h.lastIndex,se.push([fe,_(K,1)])}let de=Ce(P,w(L),null);h.lastIndex=0;let z=Zn((fe,we)=>(Ie=>{let $t=Ie[0],Ss=Ie[1];return ur=>{let wt,Ht=ur[0],cr=ur[1],ar=(wt=null,[i.TryGetValue(Ss,{get:()=>wt,set:Ut=>{wt=Ut}}),wt]),yt=ar[0]?ar[1].AsChoiceView:sr("");return yt.$==1?[$t,F.Cons(Ht==""?yt.$0:M(Ut=>Ut+Ht,yt.$0),cr)]:[$t+yt.$0+Ht,cr]}})(fe)(we),se,[de,F.Empty]);if(z[1].$==1)if(z[1].$1.$==1)if(z[1].$1.$1.$==1)if(z[1].$1.$1.$1.$==0){let fe=z[0];k=et(q,Vo((we,Ie,$t)=>fe+we+Ie+$t,z[1].$0,z[1].$1.$0,z[1].$1.$1.$0))}else{let fe=z[0];k=et(q,M(we=>fe+Ue("",we),Mo(z[1])))}else{let fe=z[0];k=et(q,Oo((we,Ie)=>fe+we+Ie,z[1].$0,z[1].$1.$0))}else if(z[0]=="")k=et(q,z[1].$0);else{let fe=z[0];k=et(q,M(we=>fe+we,z[1].$0))}else k=C.Create(q,z[0]);return m(u,k)})()});let T=a,H=l.length==0?w(()=>{v()}):w(u=>{v(),te(h=>{h(u)},l)}),x=!b(a,null)&&a.length===1&&_(a,0)instanceof Node&&_(a,0)instanceof Element&&(n=_(a,0),!0)?w(n):null,N={Els:T,Dirty:!0,Holes:r,Attrs:o,Render:H?H.$0:void 0,El:x?x.$0:void 0};return[fr(N,["Render","El"]),pt(Oe(),Pe,s)]}function xi(){return Ze.GlobalHoles}function Q(t,e,n){Ql(t,e,r=>{r.closest("[ws-preserve]")==null&&n(r)})}function Ti(t,e,n){let r=as(n);return s=>{rt(t,e,r,s)}}function Ei(t,e){ei(t,n=>{n.closest("[ws-preserve]")==null&&e(n)})}function ct(){return Ze.TextHoleRE}function at(t){let e,n=t.s;if(!(n==null||(!(n!=null&&n.$==2||n!=null&&n.$==3)||(e=n.$1,!1)))){t.s=null;for(let r=0,s=V(e)-1;r<=s;r++){let o=_(e,r);typeof o=="object"?(l=>{at(l)})(o):o()}}}function Di(){throw new En("New")}var De=class t{Attr;Children;Delimiters;El;ElKey;Render;Equals(e){return this.ElKey===e.ElKey}GetHashCode(){return this.ElKey}static New(e,n,r,s,o,l){let i={Attr:e,Children:n,El:s,ElKey:o},c=(Ve(i,"Delimiters",r),Ve(i,"Render",l),i);return U(t,c)}},xn=class extends W{idle;robin;Fork(e){this.robin.push(e),this.idle&&(this.idle=!1,setTimeout(()=>{this.tick()},0))}tick(){let e=Date.now(),n=!0;for(;n;)this.robin.length===0?(this.idle=!0,n=!1):(this.robin.shift()(),Date.now()-e>40&&(setTimeout(()=>{this.tick()},0),n=!1))}constructor(){super(),this.idle=!0,this.robin=[]}},Tn=class extends W{init;c;pending;r;constructor(){super(),this.c=!1,this.pending=null,this.r=[],this.init=1}};function ki(){return O.StringApply}function xe(t,e,n){let r;return r=null,[s=>{let o=()=>{n.UpdateMaybe(l=>{let i;return r=t(s),r!=null&&r.$==1&&!b(r.$0,l)&&(i=[r,r.$0],!0)?i[0]:null})};s.addEventListener("change",o),s.addEventListener("input",o),s.addEventListener("keypress",o)},s=>{let o=e(s);return l=>l==null?null:o(l.$0)},M(s=>{let o;return r!=null&&r.$==1&&b(r.$0,s)&&(o=r.$0,!0)?null:w(s)},n.View)]}function Fi(){return O.StringSet}function Gi(){return O.StringGet}function Ri(){return O.StringListSet}function Ii(){return O.StringListGet}function Vi(){return O.DateTimeSetUnchecked}function Mi(){return O.DateTimeGetUnchecked}function Oi(t,e,n){let r;return r=null,[s=>{s.addEventListener("change",()=>{n.UpdateMaybe(o=>{let l;return r=t(s),r!=null&&r.$==1&&r.$0!==o&&(l=[r,r.$0],!0)?l[0]:null})})},s=>{let o=e(s);return l=>l==null?null:o(l.$0)},M(s=>{let o;return r!=null&&r.$==1&&b(r.$0,s)&&(o=r.$0,!0)?null:w(s)},n.View)]}function Pi(){return O.FileSetUnchecked}function Li(){return O.FileGetUnchecked}function Hi(){return O.IntSetUnchecked}function Ui(){return O.IntGetUnchecked}function Wi(){return O.IntSetChecked}function qi(){return O.IntGetChecked}function ji(){return O.FloatSetUnchecked}function Bi(){return O.FloatGetUnchecked}function Ji(){return O.FloatSetChecked}function Ki(){return O.FloatGetChecked}function zi(){return O.FloatApplyUnchecked}function Yi(){return O.BoolCheckedApply}function Zi(){return O.DateTimeApplyUnchecked}function Xi(){return O.FileApplyUnchecked}function Qi(){return O.StringListApply}var mt=oe(t=>class{static{mt=t(this)}static longMonths;static shortMonths;static longDays;static shortDays;static{this.shortDays=me(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),this.longDays=me(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),this.shortMonths=me(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),this.longMonths=me(["January","February","March","April","May","June","July","August","September","October","November","December"])}}),Dt=class extends Error{ct;static New(e){return new this("New",e)}static New_1(e,n,r){return new this("New_1",e,n,r)}constructor(e,n,r,s){let o;if(e=="New"&&(o=n,e="New_1",n="The operation was canceled.",r=null,s=o),e=="New_1"){let l=n,i=r,c=s;super(l),this.inner=i,this.ct=c}}},En=class extends Error{static New(){return new this("New")}static New_1(e){return new this("New_1",e)}constructor(e,n){if(e=="New"&&(e="New_1",n="The given key was not present in the dictionary."),e=="New_1"){let r=n;super(r)}}},nr=oe(t=>class{static{nr=t(this)}static counter;static{this.counter=0}});function fs(t,e,n,r){let s={DynElem:t,DynFlags:e,DynNodes:n};return Ve(s,"OnAfterRender",r),s}var ft=class t extends f{docNode_1;updates_1;elt;rvUpdates;static New(e,n,r){let s=ci(e,n,r.docNode),o=kt.Create(r.updates);return new t(Ml(s),Pe(wn(s.Attr),o.v),e,o)}static TreeNode(e,n){let r=kt.Create(n),s=$e(i=>wn(i[1]),e.Attrs),o=pt(Oe(),Pe,s),l=Pe(o,r.v);return new t(rs(e),l,_(e.Els,0),r)}constructor(e,n,r,s){super(e,n),this.docNode_1=e,this.updates_1=n,this.elt=r,this.rvUpdates=s}},O=oe(t=>class{static{O=t(this)}static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static{this.EmptyAttr=null,this.BoolCheckedApply=d=>[u=>{u.addEventListener("change",()=>d.Get()!=u.checked?d.Set(u.checked):null)},u=>h=>h!=null&&h.$==1?void(u.checked=h.$0):null,M(w,d.View)],this.StringSet=d=>u=>{d.value=u},this.StringGet=d=>w(d.value);let n=Gi(),r=Fi();this.StringApply=d=>xe(n,r,d),this.StringListSet=d=>u=>{let h=d.options;for(let g=0,y=h.length-1;g<=y;g++)(()=>{let A=h.item(g);A.selected=du(A.value,u)})()},this.StringListGet=d=>{let u=d.selectedOptions;return w(Ae(Y(()=>At(h=>[u.item(h).value],an(0,u.length-1)))))};let s=Ii(),o=Ri();this.StringListApply=d=>xe(s,o,d),this.DateTimeSetUnchecked=d=>u=>{d.value=new Date(u).toLocaleString()},this.DateTimeGetUnchecked=d=>{let u,h,g=d.value;if(tt(g))return w(-864e13);{u=0;let y=Du(g);return h=[y!=null&&y.$==1&&(u=y.$0,!0),u],h[0]?w(h[1]):null}};let l=Mi(),i=Vi();this.DateTimeApplyUnchecked=d=>xe(l,i,d),this.FileSetUnchecked=()=>()=>null,this.FileGetUnchecked=d=>{let u=d.files;return w(Ae(Y(()=>Fe(h=>u.item(h),an(0,u.length-1)))))};let c=Li(),a=Pi();this.FileApplyUnchecked=d=>Oi(c,a,d),this.IntSetUnchecked=d=>u=>{d.value=String(u)},this.IntGetUnchecked=d=>{let u=d.value;if(tt(u))return w(0);{let h=+u;return h!==h>>0?null:w(h)}};let m=Ui(),$=Hi();this.IntApplyUnchecked=d=>xe(m,$,d),this.IntSetChecked=d=>u=>{let h=u.Input;return d.value!=h?void(d.value=h):null},this.IntGetChecked=d=>{let u,h,g=d.value;if(tt(g))u=!d.checkValidity||d.checkValidity()?pe.Blank(g):pe.Invalid(g);else{let y=(h=0,[Fl(g,{get:()=>h,set:A=>{h=A}}),h]);u=y[0]?pe.Valid(y[1],g):pe.Invalid(g)}return w(u)};let p=qi(),v=Wi();this.IntApplyChecked=d=>xe(p,v,d),this.FloatSetUnchecked=d=>u=>{d.value=String(u)},this.FloatGetUnchecked=d=>{let u=d.value;if(tt(u))return w(0);{let h=+u;return isNaN(h)?null:w(h)}};let T=Bi(),H=ji();this.FloatApplyUnchecked=d=>xe(T,H,d),this.FloatSetChecked=d=>u=>{let h=u.Input;return d.value!=h?void(d.value=h):null},this.FloatGetChecked=d=>{let u,h=d.value;if(tt(h))u=!d.checkValidity||d.checkValidity()?pe.Blank(h):pe.Invalid(h);else{let g=+h;u=isNaN(g)?pe.Invalid(h):pe.Valid(g,h)}return w(u)};let x=Ki(),N=Ji();this.FloatApplyChecked=d=>xe(x,N,d)}}),Ze=oe(t=>class{static{Ze=t(this)}static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static{this.LoadedTemplates=new ue("New_5"),this.LocalTemplatesLoaded=!1,this.GlobalHoles=new ue("New_5"),this.TextHoleRE="\\${([^}]+)}",this.RenderedFullDocTemplate=null}});function hs(){return vu()}function Tr(t){return G(()=>S(tu(()=>{},Au(t)),()=>(Su(t),J(null))))}function eu(t,e){return rr(Cs(t.$0,e.$0))}function tu(t,e){let n=e.Duration;if(n===0)return E();{let r=s=>{function o(l){return i=>{let c=i-l;return e.Compute(c),t(),c<=n?void requestAnimationFrame(a=>{o(l)(a)}):s()}}requestAnimationFrame(l=>{o(l)(l)})};return Bn((s,o,l)=>r.apply(null,[s,o,l]))}}function rr(t){return{$:0,$0:t}}function Lt(t){return rr(Iu(Fe(_u,t)))}function ln(){return rr(vs())}function ds(){return ws.BatchUpdatesEnabled}function nu(t){let e=[0];function n(){return G(()=>S(t,()=>{let s=e[0];return b(s,1)?(e[0]=0,E()):b(s,2)?(e[0]=1,n()):E()}))}return()=>{let r=e[0];b(r,0)?(e[0]=1,fl(n(),null)):b(r,1)&&(e[0]=2)}}function ru(){return ir.AjaxProvider}function su(t){return JSON.stringify(t)}function ou(t){return Ps($e(e=>[e[0],e[1]],Cl(e=>e[0],t.concat([["content-type","application/json"]]))))}function lu(){return ir.EndPoint}function Er(t,e,n,r,s,o,l){let i=new XMLHttpRequest,c=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");i.open("POST",e,t),t==!0&&(i.withCredentials=!0);let a;for(var m in n)i.setRequestHeader(m,n[m]);c&&i.setRequestHeader("x-csrftoken",c);function $(){if(i.status==200)s(i.responseText);else if(l&&i.status==403&&i.responseText=="CSRF")l();else{let p="Response status is not 200: ";o(new Error(p+i.status))}}"onload"in i?i.onload=i.onerror=i.onabort=$:i.onreadystatechange=()=>{i.readyState==4&&$()},i.send(r)}var kt=class t{c;s;v;static Create(e){let n;return n=null,n=t.New(e,null,()=>{let r;return r=n.s,r===null&&(r=Wo(n.c()),n.s=r,Ur(r,()=>{n.s=null})),r}),n}static New(e,n,r){return U(t,{c:e,s:n,v:r})}};function tt(t){return dl(Eu,t)}var pe=class t{get Input(){return this.$==1?this.$0:this.$==2?this.$0:this.$1}static Blank(e){return U(t,{$:2,$0:e})}static Invalid(e){return U(t,{$:1,$0:e})}static Valid(e,n){return U(t,{$:0,$0:e,$1:n})}};function iu(t){let e=null,n=0,r=t.textContent,s=new RegExp(ct(),"g");for(;e=s.exec(r),e!==null;){t.parentNode.insertBefore(globalThis.document.createTextNode(Ce(r,w(n),w(s.lastIndex-_(e,0).length-1))),t),n=s.lastIndex;let o=globalThis.document.createElement("span");o.setAttribute("ws-replace",_(e,1).toLowerCase()),t.parentNode.insertBefore(o,t)}s.lastIndex=0,t.textContent=Ce(r,w(n),null)}function Dr(t){console.warn("Instantiating non-loaded template",t)}function uu(t,e,n){let r=t.querySelector("[ws-replace]");return b(r,null)?(console.warn("Filling non-existent text hole",n),null):(r.parentNode.replaceChild(globalThis.document.createTextNode(e),r),w(r.getAttribute("ws-replace")))}function cu(t,e){let n=r=>{Q(t,"["+r+"]",s=>{e.Contains(s.getAttribute(r))||s.removeAttribute(r)})};n("ws-attr"),n("ws-onafterrender"),n("ws-var"),Q(t,"[ws-hole]",r=>{if(!e.Contains(r.getAttribute("ws-hole")))for(r.removeAttribute("ws-hole");r.hasChildNodes();)r.removeChild(r.lastChild)}),Q(t,"[ws-replace]",r=>{e.Contains(r.getAttribute("ws-replace"))||r.parentNode.removeChild(r)}),Q(t,"[ws-on]",r=>{r.setAttribute("ws-on",Ue(" ",ht(s=>e.Contains(_(ge(s,[":"],1),1)),ge(r.getAttribute("ws-on"),[" "],1))))}),Q(t,"[ws-attr-holes]",r=>{let s=ge(r.getAttribute("ws-attr-holes"),[" "],1);for(let o=0,l=s.length-1;o<=l;o++){let i=_(s,o),c=new RegExp(ct(),"g"),a=r.getAttribute(i).replace(c,(m,$)=>e.Contains($)?m:"");r.setAttribute(i,a)}})}function au(t,e){ps(e);let n=e.nodeName.toLowerCase(),r=t.querySelector("[ws-attr="+n+"]");if(b(r,null))console.warn("Filling non-existent attr hole",n);else{r.removeAttribute("ws-attr");for(let s=0,o=e.attributes.length-1;s<=o;s++){let l=e.attributes.item(s);l.name=="class"&&r.hasAttribute("class")?r.setAttribute("class",r.getAttribute("class")+" "+l.nodeValue):r.setAttribute(l.name,l.nodeValue)}}}function fu(t,e){let n=r=>{Q(t,"["+r+"]",s=>{let o,l=(o=null,[e.TryGetValue(s.getAttribute(r).toLowerCase(),{get:()=>o,set:i=>{o=i}}),o]);l[0]&&s.setAttribute(r,l[1])})};n("ws-hole"),n("ws-replace"),n("ws-attr"),n("ws-onafterrender"),n("ws-var"),Q(t,"[ws-on]",r=>{r.setAttribute("ws-on",Ue(" ",$e(s=>{let o,l=ge(s,[":"],1),i=(o=null,[e.TryGetValue(_(l,1),{get:()=>o,set:c=>{o=c}}),o]);return i[0]?_(l,0)+":"+i[1]:s},ge(r.getAttribute("ws-on"),[" "],1))))}),Q(t,"[ws-attr-holes]",r=>{let s=ge(r.getAttribute("ws-attr-holes"),[" "],1);for(let o=0,l=s.length-1;o<=l;o++)(()=>{let i=_(s,o);return r.setAttribute(i,no((c,a)=>{let m=Me(a);return c.replace(new RegExp("\\${"+m[0]+"}","ig"),"${"+m[1]+"}")},r.getAttribute(i),e))})()})}function kr(t,e,n){for(;;)if(t.hasChildNodes())n=e.insertBefore(t.lastChild,n);else return null}function ps(t){let e=t.attributes,n=[],r=[],s=[];for(let l=0,i=e.length-1;l<=i;l++){let c=e.item(l);if(_t(c.nodeName,"ws-on")&&c.nodeName!="ws-onafterrender"&&c.nodeName!="ws-on")n.push(c.nodeName),r.push(Ce(c.nodeName,w(5),null)+":"+c.nodeValue.toLowerCase());else if(!_t(c.nodeName,"ws-")&&new RegExp(ct()).test(c.nodeValue)){let a=new RegExp(ct(),"g"),m=c.nodeValue.replace(a,($,p)=>"${"+p.toLowerCase()+"}");c.nodeValue=m,s.push(c.nodeName)}}r.length!=0&&t.setAttribute("ws-on",Ue(" ",r)),s.length!=0&&t.setAttribute("ws-attr-holes",Ue(" ",s));let o=l=>{let i=t.getAttribute(l);i==null||t.setAttribute(l,i.toLowerCase())};o("ws-hole"),o("ws-replace"),o("ws-attr"),o("ws-onafterrender"),o("ws-var"),te(l=>{t.removeAttribute(l)},n)}function Ce(t,e,n){if(e==null)if(n!=null&&n.$==1){let r=n.$0;return r<0?"":t.slice(0,r+1)}else return"";else{if(n==null)return t.slice(e.$0);{let r=n.$0;return r<0?"":t.slice(e.$0,r+1)}}}function Ft(){return I("The input sequence has an insufficient number of elements.")}function hu(){return I("The input must be non-negative.")}function du(t,e){let n=!0,r=0;for(;n&&r<V(e);)b(e[r],t)?n=!1:r=r+1;return!n}function pu(t,e){for(let n=0,r=e.length-1;n<=r;n++)e[n]=t(n,e[n]);return e}function mu(t,e){for(let n=0,r=e.length-1;n<=r;n++)e[n]=t(e[n])}var Dn=class extends W{d;GetEnumerator(){return D(Fe(e=>e.K,this.d))}constructor(e){super(),this.d=e}},kn=class extends ne{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}get AsChoiceView(){return sr(this.fillWith)}},Fn=class extends ne{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},Gn=class extends ne{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},Rn=class extends ne{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},In=class extends ne{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},Vn=class extends ne{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}};function sr(t){return{$:0,$0:t}}function Xe(t){return{$:1,$0:t}}var Mn=class extends W{d;GetEnumerator(){return D(Fe(e=>e.V,this.d))}constructor(e){super(),this.d=e}};function gu(t){t.splice(0,V(t))}function $u(t,e){hl(t,e,n=>{wu(n)},()=>{},null)}function wu(t){return console.log("WebSharper UI: Uncaught asynchronous exception",t)}function yu(t,e){return{PreviousNodes:t,Top:e}}function Cu(){return gt(new ae("New_3"))}function ms(t){let e=[];function n(o,l){for(;;)switch(o){case 0:if(l!=null&&l.$==0){let i=l.$1,c=l.$0;n(0,c),l=i}else if(l!=null&&l.$==1)l=l.$0,o=1;else if(l!=null&&l.$==2)l=l.$0.Current;else if(l!=null&&l.$==6){let i=l.$0.Holes;return(c=>a=>{te(c,a)})(s)(i)}else return null;break;case 1:e.push(l),l=l.Children,o=0;break}}function r(o){return n(0,o)}function s(o){return n(1,o)}return r(t),gt(new ae("New_2",e))}function gt(t){return{$:0,$0:t}}function or(t,e){return gt(Vu(t,e.$0))}function gs(t,e){return gt(Mu(t.$0,e.$0))}function lr(t){return qe(t.$0)}function Nu(t,e){return gt(Ou(t.$0,e.$0))}function vu(){return ys.UseAnimations}function Au(t){return bu(zn(e=>e.$==1?w(e.$0):null,Ns(t.$0)))}function Su(t){te(e=>{e.$==0&&e.$0()},Ns(t.$0))}function bu(t){let e=dt(t),n=V(e);if(n===0)return xu();if(n===1)return _(e,0);{let r=io(Fe(o=>o.Duration,e)),s=$e(o=>Tu(r,o),e);return $s(r,o=>{te(l=>{l.Compute(o)},s)})}}function _u(t){return t.$0}function xu(t){return $s(0,()=>t)}function $s(t,e){return{Compute:e,Duration:t}}function Tu(t,e){let n=e.Compute,r=e.Duration,s=qu(()=>e.Compute(e.Duration));return{Compute:o=>o>=r?s.f():n(o),Duration:t}}var ws=oe(t=>class{static{ws=t(this)}static BatchUpdatesEnabled;static{this.BatchUpdatesEnabled=!0}}),ir=oe(t=>class{static{ir=t(this)}static AjaxProvider;static EndPoint;static{this.EndPoint=globalThis.location.origin,this.AjaxProvider=new Ln}});function un(t){let e=[],n;for(var r in t)e.push.apply(e,t[r]);return e}var On=class extends W{push;value;dirty;updates;get NChanged(){return this.updates}NGetExitAnim(e){return ln()}NGetEnterAnim(e){return ln()}NGetChangeAnim(e){return ln()}NSync(e){this.dirty&&(this.push(e)(this.value),this.dirty=!1)}constructor(e,n){super(),this.push=n,this.value=void 0,this.dirty=!1,this.updates=M(r=>{this.value=r,this.dirty=!0},e)}};function Eu(t){return t.match(new RegExp("\\s"))!==null}function Du(t){let e=Date.parse(t);return isNaN(e)?null:w(e)}function ku(t,e,n,r){let s=+t,o=s===s-s%1&&s>=e&&s<=n;return o&&r.set(s),o}function Fu(t){let e=Ae(oo(t));return Nl(e),Pn(e,0,e.length-1)}function Pn(t,e,n){if(n-e+1<=0)return null;{let r=(e+n)/2>>0;return Gu(_(t,r),Pn(t,e,r-1),Pn(t,r+1,n))}}function Gu(t,e,n){let r=e==null?0:e.Height,s=n==null?0:n.Height,l=1+(ke(r,s)===1?r:s);return Wu(t,e,n,l,1+(e==null?0:e.Count)+(n==null?0:n.Count))}function Ru(t,e){function n(r,s){let o;for(;;){if(r==null)return s.$==1?w([s.$0[0],[s.$0[1],s.$1]]):null;t?(o=r,r=o.Right,s=F.Cons([o.Node,o.Left],s)):(o=r,r=o.Left,s=F.Cons([o.Node,o.Right],s))}}return ho(r=>n(r[0],r[1]),[e,F.Empty])}var ys=oe(t=>class{static{ys=t(this)}static UseAnimations;static CubicInOut;static{this.CubicInOut=Un.Custom(n=>{let r=n*n;return 3*r-2*(r*n)}),this.UseAnimations=!0}});function Cs(t,e){return t.$==0?e:e.$==0?t:{$:2,$0:t,$1:e}}function Ns(t){let e=[];function n(r){for(;;){if(r.$==1)return e.push(r.$0);if(r.$==2){let s=r.$1,o=r.$0;n(o),r=s}else return r.$==3?te(s=>{e.push(s)},r.$0):null}}return n(t),e.slice(0)}function Iu(t){let e=dt(t);return pt(vs(),Cs,e)}function vs(){return As.Empty}var Ln=class extends W{Async(e,n,r,s,o){Er(!0,e,n,r,s,o,()=>{Er(!0,e,n,r,s,o,void 0)})}},Qe=oe(t=>class{static{Qe=t(this)}static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static{this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi"),this.rtagName=new RegExp("<([\\w:]+)"),this.rhtml=new RegExp("<|&#?\\w+;");let n=[1,"<table>","</table>"],r=Object.fromEntries([["option",[1,"<select multiple='multiple'>","</select>"]],["legend",[1,"<fieldset>","</fieldset>"]],["area",[1,"<map>","</map>"]],["param",[1,"<object>","</object>"]],["thead",n],["tbody",n],["tfoot",n],["tr",[2,"<table><tbody>","</tbody></table>"]],["col",[2,"<table><colgroup>","</colgoup></table>"]],["td",[3,"<table><tbody><tr>","</tr></tbody></table>"]]]);this.wrapMap=r,this.defaultWrap=[0,"",""]}}),Hn=class extends W{tree;Equals(e){return this.Count===e.Count&&co(b,this,e)}GetHashCode(){return-1741749453+He(Ae(this))}GetEnumerator(){return D(Ru(!1,this.tree))}get Count(){let e=this.tree;return e==null?0:e.Count}CompareTo0(e){return fo(ke,this,e)}static New_2(e){return new this("New_2",e)}constructor(e,n){if(e=="New_2"){let r=n;super(),this.tree=r}}},Un=class t extends W{transformTime;static Custom(e){return new t(e)}constructor(e){super(),this.transformTime=e}};function Vu(t,e){return new ae("New_2",ht(t,qe(e)))}function Mu(t,e){let n=new ae("New_2",qe(e));return n.ExceptWith(qe(t)),n}function qe(t){let e=Zr(t.Count,void 0);return t.CopyTo(e,0),e}function Ou(t,e){let n=new ae("New_2",qe(t));return n.IntersectWith(qe(e)),n}function Pu(t,e){let n;if(e!=null&&e.$==1){let r=[];for(n=e.$0[0].nextSibling;n!==e.$0[1];)r.push(n),n=n.nextSibling;return Gt(r)}else{let r=t.childNodes.length,s=t.childNodes,o=Kn(r,l=>s[l]);return Gt(o)}}function Lu(t,e){let n=t.$0;return Gt(ht(r=>Qr(s=>r!==s,n),e.$0))}function Hu(t,e){te(t,e.$0)}function Uu(t){let e=[];function n(r){for(;;)if(r!=null&&r.$==2)r=r.$0.Current;else{if(r!=null&&r.$==1)return e.push(r.$0.El);if(r==null)return null;if(r!=null&&r.$==5)return e.push(r.$0);if(r!=null&&r.$==4)return e.push(r.$0.Text);if(r!=null&&r.$==6){let s=r.$0.Els;return(o=>l=>{te(o,l)})(o=>{o==null||o.constructor===Object?n(o):e.push(o)})(s)}else{let s=r.$1,o=r.$0;n(o),r=s}}}return n(t.Children),Gt(dt(e))}function Gt(t){return{$:0,$0:t}}function Wu(t,e,n,r,s){return{Node:t,Left:e,Right:n,Height:r,Count:s}}function qu(t){return Ju(!1,t,ju)}function ju(){let t=this.v();return this.c=!0,this.v=t,this.f=Bu,t}function Bu(){return this.v}var As=oe(t=>class{static{As=t(this)}static Empty;static{this.Empty={$:0}}});function Ju(t,e,n){return{c:t,v:e,f:n}}return Ds(Ku);})();
